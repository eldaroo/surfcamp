"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/reserve/route";
exports.ids = ["app/api/reserve/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freserve%2Froute&page=%2Fapi%2Freserve%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freserve%2Froute.ts&appDir=C%3A%5CUsers%5Cloko_%5COneDrive%5CDesktop%5CEscritorio%5Csurfcamp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cloko_%5COneDrive%5CDesktop%5CEscritorio%5Csurfcamp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freserve%2Froute&page=%2Fapi%2Freserve%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freserve%2Froute.ts&appDir=C%3A%5CUsers%5Cloko_%5COneDrive%5CDesktop%5CEscritorio%5Csurfcamp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cloko_%5COneDrive%5CDesktop%5CEscritorio%5Csurfcamp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_loko_OneDrive_Desktop_Escritorio_surfcamp_app_api_reserve_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/reserve/route.ts */ \"(rsc)/./app/api/reserve/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/reserve/route\",\n        pathname: \"/api/reserve\",\n        filename: \"route\",\n        bundlePath: \"app/api/reserve/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\loko_\\\\OneDrive\\\\Desktop\\\\Escritorio\\\\surfcamp\\\\app\\\\api\\\\reserve\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_loko_OneDrive_Desktop_Escritorio_surfcamp_app_api_reserve_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/reserve/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyZXNlcnZlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZyZXNlcnZlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcmVzZXJ2ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNsb2tvXyU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q0VzY3JpdG9yaW8lNUNzdXJmY2FtcCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDbG9rb18lNUNPbmVEcml2ZSU1Q0Rlc2t0b3AlNUNFc2NyaXRvcmlvJTVDc3VyZmNhbXAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ29EO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ2lKOztBQUVqSiIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cmZjYW1wLWJvb2tpbmctc3lzdGVtLz85OGFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGxva29fXFxcXE9uZURyaXZlXFxcXERlc2t0b3BcXFxcRXNjcml0b3Jpb1xcXFxzdXJmY2FtcFxcXFxhcHBcXFxcYXBpXFxcXHJlc2VydmVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Jlc2VydmUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9yZXNlcnZlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yZXNlcnZlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcbG9rb19cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxFc2NyaXRvcmlvXFxcXHN1cmZjYW1wXFxcXGFwcFxcXFxhcGlcXFxccmVzZXJ2ZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9yZXNlcnZlL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freserve%2Froute&page=%2Fapi%2Freserve%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freserve%2Froute.ts&appDir=C%3A%5CUsers%5Cloko_%5COneDrive%5CDesktop%5CEscritorio%5Csurfcamp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cloko_%5COneDrive%5CDesktop%5CEscritorio%5Csurfcamp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/reserve/route.ts":
/*!**********************************!*\
  !*** ./app/api/reserve/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./lib/utils.ts\");\n/* harmony import */ var _lib_lobbypms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/lobbypms */ \"(rsc)/./lib/lobbypms.ts\");\n/* harmony import */ var _lib_whatsapp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/whatsapp */ \"(rsc)/./lib/whatsapp.ts\");\n\n\n\n\n// Mapeo de roomTypeId a category_id de LobbyPMS\nconst ROOM_TYPE_MAPPING = {\n    \"casa-playa\": 4234,\n    \"casitas-privadas\": 15507,\n    \"casas-deluxe\": 5348 // Studio 1 (representativa de casas deluxe)\n};\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { checkIn, checkOut, guests, contactInfo, roomTypeId = \"casa-playa\", activities = [], paymentIntentId } = body;\n        const bookingReference = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.generateBookingReference)();\n        console.log(\"\\uD83C\\uDFE8 ===== PROCESSING RESERVATION =====\");\n        console.log(\"\\uD83C\\uDFE8 Booking data:\", {\n            checkIn,\n            checkOut,\n            guests,\n            roomTypeId,\n            contactInfo: contactInfo ? `${contactInfo.firstName} ${contactInfo.lastName}` : \"Missing\",\n            paymentIntentId,\n            bookingReference\n        });\n        // Get the corresponding category_id for LobbyPMS\n        const categoryId = ROOM_TYPE_MAPPING[roomTypeId];\n        if (!categoryId) {\n            console.error(\"❌ Invalid room type:\", roomTypeId);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: `Tipo de habitación no válido: ${roomTypeId}`\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"\\uD83D\\uDD04 Mapping room type:\", {\n            roomTypeId,\n            categoryId,\n            mappingUsed: ROOM_TYPE_MAPPING\n        });\n        // Convert dates to the format expected by LobbyPMS (Y-m-d)\n        const formatDateForLobbyPMS = (dateString)=>{\n            const date = new Date(dateString);\n            return date.toISOString().split(\"T\")[0]; // Gets YYYY-MM-DD format\n        };\n        const formattedCheckIn = formatDateForLobbyPMS(checkIn);\n        const formattedCheckOut = formatDateForLobbyPMS(checkOut);\n        console.log(\"\\uD83D\\uDCC5 Date formatting:\", {\n            original: {\n                checkIn,\n                checkOut\n            },\n            formatted: {\n                checkIn: formattedCheckIn,\n                checkOut: formattedCheckOut\n            }\n        });\n        // Prepare LobbyPMS reservation request with correct field names and date format\n        const bookingData = {\n            start_date: formattedCheckIn,\n            end_date: formattedCheckOut,\n            guest_count: guests,\n            total_adults: guests,\n            total_children: 0,\n            guest_name: `${contactInfo.firstName} ${contactInfo.lastName}`,\n            holder_name: `${contactInfo.firstName} ${contactInfo.lastName}`,\n            guest_email: contactInfo.email,\n            guest_phone: contactInfo.phone,\n            guest_document: contactInfo.dni,\n            customer_document: contactInfo.dni,\n            customer_nationality: \"ES\",\n            category_id: categoryId,\n            room_type_id: roomTypeId,\n            booking_reference: bookingReference,\n            source: \"Surfcamp Santa Teresa\",\n            payment_intent_id: paymentIntentId,\n            status: \"confirmed\",\n            notes: `🏄‍♂️ RESERVA DESDE SURFCAMP SANTA TERESA 🏄‍♂️\\n\\nDetalles de la reserva:\\n- Web: surfcamp-santa-teresa.com\\n- Referencia: ${bookingReference}\\n- Huésped: ${contactInfo.firstName} ${contactInfo.lastName}\\n- DNI: ${contactInfo.dni}\\n- Email: ${contactInfo.email}\\n- Teléfono: ${contactInfo.phone}\\n- Pago: ${paymentIntentId}`,\n            special_requests: `Reserva realizada a través de la página web oficial de Surfcamp Santa Teresa. Referencia de pago: ${paymentIntentId}`\n        };\n        console.log(\"\\uD83D\\uDCE1 Sending to LobbyPMS:\", bookingData);\n        try {\n            console.log(\"\\uD83D\\uDE80 Attempting to create booking in LobbyPMS...\");\n            const reservationData = await _lib_lobbypms__WEBPACK_IMPORTED_MODULE_2__.lobbyPMSClient.createBooking(bookingData);\n            console.log(\"✅ LobbyPMS reservation successful:\", reservationData);\n            // Enviar mensaje de confirmación por WhatsApp\n            try {\n                const waMessage = `¡Hola! Se confirmó una reserva en SurfCamp para las fechas ${checkIn} a ${checkOut} para ${guests} huésped(es). Referencia: ${bookingReference}`;\n                const whatsappResult = await (0,_lib_whatsapp__WEBPACK_IMPORTED_MODULE_3__.sendWhatsAppMessage)(\"+5491162802566\", waMessage);\n                console.log(\"\\uD83D\\uDCF1 WhatsApp confirmation sent:\", whatsappResult);\n            } catch (whatsappError) {\n                console.error(\"❌ WhatsApp error (non-blocking):\", whatsappError);\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                reservationId: reservationData.reservation_id || reservationData.id,\n                bookingReference,\n                status: reservationData.status || \"confirmed\",\n                message: \"Reserva confirmada exitosamente en LobbyPMS\",\n                demoMode: false,\n                lobbyPMSResponse: reservationData\n            });\n        } catch (lobbyError) {\n            console.error(\"❌ LobbyPMS booking error:\", {\n                message: lobbyError.message,\n                status: lobbyError.response?.status,\n                data: lobbyError.response?.data,\n                bookingData\n            });\n            // Si es error de capacidad, ajustar y reintentar\n            if (lobbyError.response?.data?.error_code === \"MAXIMUM_CAPACITY\") {\n                console.log(\"\\uD83D\\uDD04 Capacity error detected, adjusting guest count...\");\n                // Reducir huéspedes a 1 e intentar de nuevo\n                const adjustedBookingData = {\n                    ...bookingData,\n                    guest_count: 1,\n                    total_adults: 1\n                };\n                try {\n                    console.log(\"\\uD83D\\uDD04 Retrying with 1 guest...\");\n                    const retryReservationData = await _lib_lobbypms__WEBPACK_IMPORTED_MODULE_2__.lobbyPMSClient.createBooking(adjustedBookingData);\n                    console.log(\"✅ LobbyPMS reservation successful (adjusted):\", retryReservationData);\n                    // Enviar mensaje de confirmación por WhatsApp\n                    try {\n                        const waMessage = `¡Hola! Se confirmó una reserva en SurfCamp para las fechas ${checkIn} a ${checkOut} para 1 huésped (ajustado por capacidad). Referencia: ${bookingReference}`;\n                        const whatsappResult = await (0,_lib_whatsapp__WEBPACK_IMPORTED_MODULE_3__.sendWhatsAppMessage)(\"+5491162802566\", waMessage);\n                        console.log(\"\\uD83D\\uDCF1 WhatsApp confirmation sent (adjusted):\", whatsappResult);\n                    } catch (whatsappError) {\n                        console.error(\"❌ WhatsApp error (non-blocking):\", whatsappError);\n                    }\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        success: true,\n                        reservationId: retryReservationData.reservation_id || retryReservationData.id,\n                        bookingReference,\n                        status: retryReservationData.status || \"confirmed\",\n                        message: \"Reserva confirmada exitosamente en LobbyPMS (ajustada a 1 hu\\xe9sped por capacidad)\",\n                        demoMode: false,\n                        adjusted: true,\n                        originalGuests: guests,\n                        finalGuests: 1,\n                        lobbyPMSResponse: retryReservationData\n                    });\n                } catch (retryError) {\n                    console.error(\"❌ Retry also failed:\", retryError);\n                // Continue to fallback below\n                }\n            }\n            // Solo como ÚLTIMO RECURSO: modo demo con notificación especial\n            console.log(\"\\uD83D\\uDD04 LobbyPMS failed, using emergency fallback mode\");\n            // Enviar mensaje de alerta por WhatsApp \n            try {\n                const alertMessage = `🚨 ALERTA: Fallo en LobbyPMS - Reserva ${bookingReference} requiere procesamiento manual.\\n\\nDatos:\\n- Fechas: ${checkIn} a ${checkOut}\\n- Huéspedes: ${guests}\\n- Cliente: ${contactInfo.firstName} ${contactInfo.lastName}\\n- Email: ${contactInfo.email}\\n- Teléfono: ${contactInfo.phone}\\n- Error: ${lobbyError.message}`;\n                const alertResult = await (0,_lib_whatsapp__WEBPACK_IMPORTED_MODULE_3__.sendWhatsAppMessage)(\"+5491162802566\", alertMessage);\n                console.log(\"\\uD83D\\uDCF1 WhatsApp alert sent:\", alertResult);\n            } catch (whatsappError) {\n                console.error(\"❌ WhatsApp alert error:\", whatsappError);\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                reservationId: `EMERGENCY-${bookingReference}`,\n                bookingReference,\n                status: \"pending_manual_processing\",\n                message: \"Reserva recibida - proces\\xe1ndose manualmente\",\n                demoMode: true,\n                needsManualProcessing: true,\n                fallbackReason: lobbyError.message,\n                originalError: lobbyError.response?.data,\n                note: \"Tu reserva est\\xe1 confirmada. Nos contactaremos contigo en las pr\\xf3ximas horas para finalizar los detalles.\"\n            });\n        }\n    } catch (error) {\n        console.error(\"❌ General reservation error:\", error);\n        // Generate a fallback booking reference if we don't have one\n        const fallbackReference = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.generateBookingReference)();\n        // Enviar alerta crítica por WhatsApp\n        try {\n            const criticalAlert = `🚨 ERROR CRÍTICO: Fallo general en sistema de reservas.\\n\\nReferencia: ${fallbackReference}\\nError: ${error.message}`;\n            await (0,_lib_whatsapp__WEBPACK_IMPORTED_MODULE_3__.sendWhatsAppMessage)(\"+5491162802566\", criticalAlert);\n        } catch (whatsappError) {\n            console.error(\"❌ Critical WhatsApp alert failed:\", whatsappError);\n        }\n        // Incluso en error general, confirmar al usuario\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            reservationId: `CRITICAL-FALLBACK-${fallbackReference}`,\n            bookingReference: fallbackReference,\n            status: \"pending_manual_processing\",\n            message: \"Reserva recibida - proces\\xe1ndose manualmente\",\n            demoMode: true,\n            needsManualProcessing: true,\n            error: error.message,\n            note: \"Tu reserva ha sido registrada. Nos pondremos en contacto contigo para confirmar los detalles.\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFlLENBQUMsa0JBQWtCLEVBQUVzQixrQkFBa0IsQ0FBQztZQUN2RHRFLGtCQUFrQnNFO1lBQ2xCL0QsUUFBUTtZQUNSNEMsU0FBUztZQUNUQyxVQUFVO1lBQ1ZjLHVCQUF1QjtZQUN2QjVELE9BQU9BLE1BQU02QyxPQUFPO1lBQ3BCa0IsTUFBTTtRQUNSO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cmZjYW1wLWJvb2tpbmctc3lzdGVtLy4vYXBwL2FwaS9yZXNlcnZlL3JvdXRlLnRzPzkxY2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IExvYmJ5UE1TUmVzZXJ2YXRpb25SZXF1ZXN0IH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBnZW5lcmF0ZUJvb2tpbmdSZWZlcmVuY2UgfSBmcm9tICdAL2xpYi91dGlscyc7XG5pbXBvcnQgeyBsb2JieVBNU0NsaWVudCB9IGZyb20gJ0AvbGliL2xvYmJ5cG1zJztcbmltcG9ydCB7IHNlbmRCb29raW5nQ29uZmlybWF0aW9uLCBzZW5kV2hhdHNBcHBNZXNzYWdlIH0gZnJvbSAnQC9saWIvd2hhdHNhcHAnO1xuXG4vLyBNYXBlbyBkZSByb29tVHlwZUlkIGEgY2F0ZWdvcnlfaWQgZGUgTG9iYnlQTVNcbmNvbnN0IFJPT01fVFlQRV9NQVBQSU5HID0ge1xuICAnY2FzYS1wbGF5YSc6IDQyMzQsICAgICAgICAvLyBDYXNhIFBsYXlhXG4gICdjYXNpdGFzLXByaXZhZGFzJzogMTU1MDcsIC8vIENhc2l0YSA3IChyZXByZXNlbnRhdGl2YSBkZSBjYXNpdGFzIHByaXZhZGFzKVxuICAnY2FzYXMtZGVsdXhlJzogNTM0OCAgICAgICAvLyBTdHVkaW8gMSAocmVwcmVzZW50YXRpdmEgZGUgY2FzYXMgZGVsdXhlKVxufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBcbiAgICAgIGNoZWNrSW4sIFxuICAgICAgY2hlY2tPdXQsIFxuICAgICAgZ3Vlc3RzLCBcbiAgICAgIGNvbnRhY3RJbmZvLFxuICAgICAgcm9vbVR5cGVJZCA9ICdjYXNhLXBsYXlhJywgLy8gRGVmYXVsdCByb29tIHR5cGVcbiAgICAgIGFjdGl2aXRpZXMgPSBbXSxcbiAgICAgIHBheW1lbnRJbnRlbnRJZFxuICAgIH0gPSBib2R5O1xuXG4gICAgY29uc3QgYm9va2luZ1JlZmVyZW5jZSA9IGdlbmVyYXRlQm9va2luZ1JlZmVyZW5jZSgpO1xuXG4gICAgY29uc29sZS5sb2coJ/Cfj6ggPT09PT0gUFJPQ0VTU0lORyBSRVNFUlZBVElPTiA9PT09PScpO1xuICAgIGNvbnNvbGUubG9nKCfwn4+oIEJvb2tpbmcgZGF0YTonLCB7XG4gICAgICBjaGVja0luLFxuICAgICAgY2hlY2tPdXQsXG4gICAgICBndWVzdHMsXG4gICAgICByb29tVHlwZUlkLFxuICAgICAgY29udGFjdEluZm86IGNvbnRhY3RJbmZvID8gYCR7Y29udGFjdEluZm8uZmlyc3ROYW1lfSAke2NvbnRhY3RJbmZvLmxhc3ROYW1lfWAgOiAnTWlzc2luZycsXG4gICAgICBwYXltZW50SW50ZW50SWQsXG4gICAgICBib29raW5nUmVmZXJlbmNlXG4gICAgfSk7XG5cbiAgICAvLyBHZXQgdGhlIGNvcnJlc3BvbmRpbmcgY2F0ZWdvcnlfaWQgZm9yIExvYmJ5UE1TXG4gICAgY29uc3QgY2F0ZWdvcnlJZCA9IFJPT01fVFlQRV9NQVBQSU5HW3Jvb21UeXBlSWQgYXMga2V5b2YgdHlwZW9mIFJPT01fVFlQRV9NQVBQSU5HXTtcbiAgICBcbiAgICBpZiAoIWNhdGVnb3J5SWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBJbnZhbGlkIHJvb20gdHlwZTonLCByb29tVHlwZUlkKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogYFRpcG8gZGUgaGFiaXRhY2nDs24gbm8gdsOhbGlkbzogJHtyb29tVHlwZUlkfWAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfwn5SEIE1hcHBpbmcgcm9vbSB0eXBlOicsIHtcbiAgICAgIHJvb21UeXBlSWQsXG4gICAgICBjYXRlZ29yeUlkLFxuICAgICAgbWFwcGluZ1VzZWQ6IFJPT01fVFlQRV9NQVBQSU5HXG4gICAgfSk7XG5cbiAgICAvLyBDb252ZXJ0IGRhdGVzIHRvIHRoZSBmb3JtYXQgZXhwZWN0ZWQgYnkgTG9iYnlQTVMgKFktbS1kKVxuICAgIGNvbnN0IGZvcm1hdERhdGVGb3JMb2JieVBNUyA9IChkYXRlU3RyaW5nOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsgLy8gR2V0cyBZWVlZLU1NLUREIGZvcm1hdFxuICAgIH07XG5cbiAgICBjb25zdCBmb3JtYXR0ZWRDaGVja0luID0gZm9ybWF0RGF0ZUZvckxvYmJ5UE1TKGNoZWNrSW4pO1xuICAgIGNvbnN0IGZvcm1hdHRlZENoZWNrT3V0ID0gZm9ybWF0RGF0ZUZvckxvYmJ5UE1TKGNoZWNrT3V0KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OFIERhdGUgZm9ybWF0dGluZzonLCB7XG4gICAgICBvcmlnaW5hbDogeyBjaGVja0luLCBjaGVja091dCB9LFxuICAgICAgZm9ybWF0dGVkOiB7IGNoZWNrSW46IGZvcm1hdHRlZENoZWNrSW4sIGNoZWNrT3V0OiBmb3JtYXR0ZWRDaGVja091dCB9XG4gICAgfSk7XG5cbiAgICAvLyBQcmVwYXJlIExvYmJ5UE1TIHJlc2VydmF0aW9uIHJlcXVlc3Qgd2l0aCBjb3JyZWN0IGZpZWxkIG5hbWVzIGFuZCBkYXRlIGZvcm1hdFxuICAgIGNvbnN0IGJvb2tpbmdEYXRhID0ge1xuICAgICAgc3RhcnRfZGF0ZTogZm9ybWF0dGVkQ2hlY2tJbiwgICAgIC8vIFktbS1kIGZvcm1hdCBhcyByZXF1aXJlZCBieSBMb2JieVBNU1xuICAgICAgZW5kX2RhdGU6IGZvcm1hdHRlZENoZWNrT3V0LCAgICAgIC8vIFktbS1kIGZvcm1hdCBhcyByZXF1aXJlZCBieSBMb2JieVBNU1xuICAgICAgZ3Vlc3RfY291bnQ6IGd1ZXN0cyxcbiAgICAgIHRvdGFsX2FkdWx0czogZ3Vlc3RzLCAgICAgICAgICAgICAvLyBSZXF1aXJlZCBmaWVsZCBieSBMb2JieVBNU1xuICAgICAgdG90YWxfY2hpbGRyZW46IDAsICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gMCBjaGlsZHJlblxuICAgICAgZ3Vlc3RfbmFtZTogYCR7Y29udGFjdEluZm8uZmlyc3ROYW1lfSAke2NvbnRhY3RJbmZvLmxhc3ROYW1lfWAsXG4gICAgICBob2xkZXJfbmFtZTogYCR7Y29udGFjdEluZm8uZmlyc3ROYW1lfSAke2NvbnRhY3RJbmZvLmxhc3ROYW1lfWAsIC8vIFJlcXVpcmVkIHdoZW4gY3VzdG9tZXIgZG9jdW1lbnQgaXMgbm90IHByZXNlbnRcbiAgICAgIGd1ZXN0X2VtYWlsOiBjb250YWN0SW5mby5lbWFpbCxcbiAgICAgIGd1ZXN0X3Bob25lOiBjb250YWN0SW5mby5waG9uZSxcbiAgICAgIGd1ZXN0X2RvY3VtZW50OiBjb250YWN0SW5mby5kbmksICAvLyBETkkgZGVsIGh1w6lzcGVkXG4gICAgICBjdXN0b21lcl9kb2N1bWVudDogY29udGFjdEluZm8uZG5pLCAvLyBUYW1iacOpbiBjb21vIGN1c3RvbWVyX2RvY3VtZW50IHBvciBzaSBMb2JieVBNUyBsbyByZXF1aWVyZSBhc8OtXG4gICAgICBjdXN0b21lcl9uYXRpb25hbGl0eTogJ0VTJywgICAgICAgLy8gTmFjaW9uYWxpZGFkIHBvciBkZWZlY3RvIEVzcGHDsWEgKHJlcXVlcmlkbyBjdWFuZG8gaGF5IGRvY3VtZW50bylcbiAgICAgIGNhdGVnb3J5X2lkOiBjYXRlZ29yeUlkLFxuICAgICAgcm9vbV90eXBlX2lkOiByb29tVHlwZUlkLFxuICAgICAgYm9va2luZ19yZWZlcmVuY2U6IGJvb2tpbmdSZWZlcmVuY2UsXG4gICAgICBzb3VyY2U6ICdTdXJmY2FtcCBTYW50YSBUZXJlc2EnLCAgICAgLy8gRnVlbnRlIG3DoXMgY2xhcmFcbiAgICAgIHBheW1lbnRfaW50ZW50X2lkOiBwYXltZW50SW50ZW50SWQsXG4gICAgICBzdGF0dXM6ICdjb25maXJtZWQnLFxuICAgICAgbm90ZXM6IGDwn4+E4oCN4pmC77iPIFJFU0VSVkEgREVTREUgU1VSRkNBTVAgU0FOVEEgVEVSRVNBIPCfj4TigI3imYLvuI9cXG5cXG5EZXRhbGxlcyBkZSBsYSByZXNlcnZhOlxcbi0gV2ViOiBzdXJmY2FtcC1zYW50YS10ZXJlc2EuY29tXFxuLSBSZWZlcmVuY2lhOiAke2Jvb2tpbmdSZWZlcmVuY2V9XFxuLSBIdcOpc3BlZDogJHtjb250YWN0SW5mby5maXJzdE5hbWV9ICR7Y29udGFjdEluZm8ubGFzdE5hbWV9XFxuLSBETkk6ICR7Y29udGFjdEluZm8uZG5pfVxcbi0gRW1haWw6ICR7Y29udGFjdEluZm8uZW1haWx9XFxuLSBUZWzDqWZvbm86ICR7Y29udGFjdEluZm8ucGhvbmV9XFxuLSBQYWdvOiAke3BheW1lbnRJbnRlbnRJZH1gLFxuICAgICAgc3BlY2lhbF9yZXF1ZXN0czogYFJlc2VydmEgcmVhbGl6YWRhIGEgdHJhdsOpcyBkZSBsYSBww6FnaW5hIHdlYiBvZmljaWFsIGRlIFN1cmZjYW1wIFNhbnRhIFRlcmVzYS4gUmVmZXJlbmNpYSBkZSBwYWdvOiAke3BheW1lbnRJbnRlbnRJZH1gXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OhIFNlbmRpbmcgdG8gTG9iYnlQTVM6JywgYm9va2luZ0RhdGEpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qAIEF0dGVtcHRpbmcgdG8gY3JlYXRlIGJvb2tpbmcgaW4gTG9iYnlQTVMuLi4nKTtcbiAgICAgIGNvbnN0IHJlc2VydmF0aW9uRGF0YSA9IGF3YWl0IGxvYmJ5UE1TQ2xpZW50LmNyZWF0ZUJvb2tpbmcoYm9va2luZ0RhdGEpO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIExvYmJ5UE1TIHJlc2VydmF0aW9uIHN1Y2Nlc3NmdWw6JywgcmVzZXJ2YXRpb25EYXRhKTtcblxuICAgICAgLy8gRW52aWFyIG1lbnNhamUgZGUgY29uZmlybWFjacOzbiBwb3IgV2hhdHNBcHBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHdhTWVzc2FnZSA9IGDCoUhvbGEhIFNlIGNvbmZpcm3DsyB1bmEgcmVzZXJ2YSBlbiBTdXJmQ2FtcCBwYXJhIGxhcyBmZWNoYXMgJHtjaGVja0lufSBhICR7Y2hlY2tPdXR9IHBhcmEgJHtndWVzdHN9IGh1w6lzcGVkKGVzKS4gUmVmZXJlbmNpYTogJHtib29raW5nUmVmZXJlbmNlfWA7XG4gICAgICAgIGNvbnN0IHdoYXRzYXBwUmVzdWx0ID0gYXdhaXQgc2VuZFdoYXRzQXBwTWVzc2FnZShcbiAgICAgICAgICAnKzU0OTExNjI4MDI1NjYnLFxuICAgICAgICAgIHdhTWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TsSBXaGF0c0FwcCBjb25maXJtYXRpb24gc2VudDonLCB3aGF0c2FwcFJlc3VsdCk7XG4gICAgICB9IGNhdGNoICh3aGF0c2FwcEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBXaGF0c0FwcCBlcnJvciAobm9uLWJsb2NraW5nKTonLCB3aGF0c2FwcEVycm9yKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgcmVzZXJ2YXRpb25JZDogcmVzZXJ2YXRpb25EYXRhLnJlc2VydmF0aW9uX2lkIHx8IHJlc2VydmF0aW9uRGF0YS5pZCxcbiAgICAgICAgYm9va2luZ1JlZmVyZW5jZSxcbiAgICAgICAgc3RhdHVzOiByZXNlcnZhdGlvbkRhdGEuc3RhdHVzIHx8ICdjb25maXJtZWQnLFxuICAgICAgICBtZXNzYWdlOiAnUmVzZXJ2YSBjb25maXJtYWRhIGV4aXRvc2FtZW50ZSBlbiBMb2JieVBNUycsXG4gICAgICAgIGRlbW9Nb2RlOiBmYWxzZSxcbiAgICAgICAgbG9iYnlQTVNSZXNwb25zZTogcmVzZXJ2YXRpb25EYXRhXG4gICAgICB9KTtcblxuICAgIH0gY2F0Y2ggKGxvYmJ5RXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIExvYmJ5UE1TIGJvb2tpbmcgZXJyb3I6Jywge1xuICAgICAgICBtZXNzYWdlOiBsb2JieUVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YXR1czogbG9iYnlFcnJvci5yZXNwb25zZT8uc3RhdHVzLFxuICAgICAgICBkYXRhOiBsb2JieUVycm9yLnJlc3BvbnNlPy5kYXRhLFxuICAgICAgICBib29raW5nRGF0YVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNpIGVzIGVycm9yIGRlIGNhcGFjaWRhZCwgYWp1c3RhciB5IHJlaW50ZW50YXJcbiAgICAgIGlmIChsb2JieUVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvcl9jb2RlID09PSAnTUFYSU1VTV9DQVBBQ0lUWScpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflIQgQ2FwYWNpdHkgZXJyb3IgZGV0ZWN0ZWQsIGFkanVzdGluZyBndWVzdCBjb3VudC4uLicpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVkdWNpciBodcOpc3BlZGVzIGEgMSBlIGludGVudGFyIGRlIG51ZXZvXG4gICAgICAgIGNvbnN0IGFkanVzdGVkQm9va2luZ0RhdGEgPSB7XG4gICAgICAgICAgLi4uYm9va2luZ0RhdGEsXG4gICAgICAgICAgZ3Vlc3RfY291bnQ6IDEsXG4gICAgICAgICAgdG90YWxfYWR1bHRzOiAxXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJldHJ5aW5nIHdpdGggMSBndWVzdC4uLicpO1xuICAgICAgICAgIGNvbnN0IHJldHJ5UmVzZXJ2YXRpb25EYXRhID0gYXdhaXQgbG9iYnlQTVNDbGllbnQuY3JlYXRlQm9va2luZyhhZGp1c3RlZEJvb2tpbmdEYXRhKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIExvYmJ5UE1TIHJlc2VydmF0aW9uIHN1Y2Nlc3NmdWwgKGFkanVzdGVkKTonLCByZXRyeVJlc2VydmF0aW9uRGF0YSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRW52aWFyIG1lbnNhamUgZGUgY29uZmlybWFjacOzbiBwb3IgV2hhdHNBcHBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgd2FNZXNzYWdlID0gYMKhSG9sYSEgU2UgY29uZmlybcOzIHVuYSByZXNlcnZhIGVuIFN1cmZDYW1wIHBhcmEgbGFzIGZlY2hhcyAke2NoZWNrSW59IGEgJHtjaGVja091dH0gcGFyYSAxIGh1w6lzcGVkIChhanVzdGFkbyBwb3IgY2FwYWNpZGFkKS4gUmVmZXJlbmNpYTogJHtib29raW5nUmVmZXJlbmNlfWA7XG4gICAgICAgICAgICBjb25zdCB3aGF0c2FwcFJlc3VsdCA9IGF3YWl0IHNlbmRXaGF0c0FwcE1lc3NhZ2UoXG4gICAgICAgICAgICAgICcrNTQ5MTE2MjgwMjU2NicsXG4gICAgICAgICAgICAgIHdhTWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OxIFdoYXRzQXBwIGNvbmZpcm1hdGlvbiBzZW50IChhZGp1c3RlZCk6Jywgd2hhdHNhcHBSZXN1bHQpO1xuICAgICAgICAgIH0gY2F0Y2ggKHdoYXRzYXBwRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBXaGF0c0FwcCBlcnJvciAobm9uLWJsb2NraW5nKTonLCB3aGF0c2FwcEVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICByZXNlcnZhdGlvbklkOiByZXRyeVJlc2VydmF0aW9uRGF0YS5yZXNlcnZhdGlvbl9pZCB8fCByZXRyeVJlc2VydmF0aW9uRGF0YS5pZCxcbiAgICAgICAgICAgIGJvb2tpbmdSZWZlcmVuY2UsXG4gICAgICAgICAgICBzdGF0dXM6IHJldHJ5UmVzZXJ2YXRpb25EYXRhLnN0YXR1cyB8fCAnY29uZmlybWVkJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdSZXNlcnZhIGNvbmZpcm1hZGEgZXhpdG9zYW1lbnRlIGVuIExvYmJ5UE1TIChhanVzdGFkYSBhIDEgaHXDqXNwZWQgcG9yIGNhcGFjaWRhZCknLFxuICAgICAgICAgICAgZGVtb01vZGU6IGZhbHNlLFxuICAgICAgICAgICAgYWRqdXN0ZWQ6IHRydWUsXG4gICAgICAgICAgICBvcmlnaW5hbEd1ZXN0czogZ3Vlc3RzLFxuICAgICAgICAgICAgZmluYWxHdWVzdHM6IDEsXG4gICAgICAgICAgICBsb2JieVBNU1Jlc3BvbnNlOiByZXRyeVJlc2VydmF0aW9uRGF0YVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChyZXRyeUVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgUmV0cnkgYWxzbyBmYWlsZWQ6JywgcmV0cnlFcnJvcik7XG4gICAgICAgICAgLy8gQ29udGludWUgdG8gZmFsbGJhY2sgYmVsb3dcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTb2xvIGNvbW8gw5pMVElNTyBSRUNVUlNPOiBtb2RvIGRlbW8gY29uIG5vdGlmaWNhY2nDs24gZXNwZWNpYWxcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIExvYmJ5UE1TIGZhaWxlZCwgdXNpbmcgZW1lcmdlbmN5IGZhbGxiYWNrIG1vZGUnKTtcbiAgICAgIFxuICAgICAgLy8gRW52aWFyIG1lbnNhamUgZGUgYWxlcnRhIHBvciBXaGF0c0FwcCBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFsZXJ0TWVzc2FnZSA9IGDwn5qoIEFMRVJUQTogRmFsbG8gZW4gTG9iYnlQTVMgLSBSZXNlcnZhICR7Ym9va2luZ1JlZmVyZW5jZX0gcmVxdWllcmUgcHJvY2VzYW1pZW50byBtYW51YWwuXFxuXFxuRGF0b3M6XFxuLSBGZWNoYXM6ICR7Y2hlY2tJbn0gYSAke2NoZWNrT3V0fVxcbi0gSHXDqXNwZWRlczogJHtndWVzdHN9XFxuLSBDbGllbnRlOiAke2NvbnRhY3RJbmZvLmZpcnN0TmFtZX0gJHtjb250YWN0SW5mby5sYXN0TmFtZX1cXG4tIEVtYWlsOiAke2NvbnRhY3RJbmZvLmVtYWlsfVxcbi0gVGVsw6lmb25vOiAke2NvbnRhY3RJbmZvLnBob25lfVxcbi0gRXJyb3I6ICR7bG9iYnlFcnJvci5tZXNzYWdlfWA7XG4gICAgICAgIGNvbnN0IGFsZXJ0UmVzdWx0ID0gYXdhaXQgc2VuZFdoYXRzQXBwTWVzc2FnZShcbiAgICAgICAgICAnKzU0OTExNjI4MDI1NjYnLFxuICAgICAgICAgIGFsZXJ0TWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TsSBXaGF0c0FwcCBhbGVydCBzZW50OicsIGFsZXJ0UmVzdWx0KTtcbiAgICAgIH0gY2F0Y2ggKHdoYXRzYXBwRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFdoYXRzQXBwIGFsZXJ0IGVycm9yOicsIHdoYXRzYXBwRXJyb3IpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICByZXNlcnZhdGlvbklkOiBgRU1FUkdFTkNZLSR7Ym9va2luZ1JlZmVyZW5jZX1gLFxuICAgICAgICBib29raW5nUmVmZXJlbmNlLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nX21hbnVhbF9wcm9jZXNzaW5nJyxcbiAgICAgICAgbWVzc2FnZTogJ1Jlc2VydmEgcmVjaWJpZGEgLSBwcm9jZXPDoW5kb3NlIG1hbnVhbG1lbnRlJyxcbiAgICAgICAgZGVtb01vZGU6IHRydWUsXG4gICAgICAgIG5lZWRzTWFudWFsUHJvY2Vzc2luZzogdHJ1ZSxcbiAgICAgICAgZmFsbGJhY2tSZWFzb246IGxvYmJ5RXJyb3IubWVzc2FnZSxcbiAgICAgICAgb3JpZ2luYWxFcnJvcjogbG9iYnlFcnJvci5yZXNwb25zZT8uZGF0YSxcbiAgICAgICAgbm90ZTogJ1R1IHJlc2VydmEgZXN0w6EgY29uZmlybWFkYS4gTm9zIGNvbnRhY3RhcmVtb3MgY29udGlnbyBlbiBsYXMgcHLDs3hpbWFzIGhvcmFzIHBhcmEgZmluYWxpemFyIGxvcyBkZXRhbGxlcy4nXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBHZW5lcmFsIHJlc2VydmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBhIGZhbGxiYWNrIGJvb2tpbmcgcmVmZXJlbmNlIGlmIHdlIGRvbid0IGhhdmUgb25lXG4gICAgY29uc3QgZmFsbGJhY2tSZWZlcmVuY2UgPSBnZW5lcmF0ZUJvb2tpbmdSZWZlcmVuY2UoKTtcbiAgICBcbiAgICAvLyBFbnZpYXIgYWxlcnRhIGNyw610aWNhIHBvciBXaGF0c0FwcFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjcml0aWNhbEFsZXJ0ID0gYPCfmqggRVJST1IgQ1LDjVRJQ086IEZhbGxvIGdlbmVyYWwgZW4gc2lzdGVtYSBkZSByZXNlcnZhcy5cXG5cXG5SZWZlcmVuY2lhOiAke2ZhbGxiYWNrUmVmZXJlbmNlfVxcbkVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YDtcbiAgICAgIGF3YWl0IHNlbmRXaGF0c0FwcE1lc3NhZ2UoJys1NDkxMTYyODAyNTY2JywgY3JpdGljYWxBbGVydCk7XG4gICAgfSBjYXRjaCAod2hhdHNhcHBFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIENyaXRpY2FsIFdoYXRzQXBwIGFsZXJ0IGZhaWxlZDonLCB3aGF0c2FwcEVycm9yKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSW5jbHVzbyBlbiBlcnJvciBnZW5lcmFsLCBjb25maXJtYXIgYWwgdXN1YXJpb1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcmVzZXJ2YXRpb25JZDogYENSSVRJQ0FMLUZBTExCQUNLLSR7ZmFsbGJhY2tSZWZlcmVuY2V9YCxcbiAgICAgIGJvb2tpbmdSZWZlcmVuY2U6IGZhbGxiYWNrUmVmZXJlbmNlLFxuICAgICAgc3RhdHVzOiAncGVuZGluZ19tYW51YWxfcHJvY2Vzc2luZycsXG4gICAgICBtZXNzYWdlOiAnUmVzZXJ2YSByZWNpYmlkYSAtIHByb2Nlc8OhbmRvc2UgbWFudWFsbWVudGUnLFxuICAgICAgZGVtb01vZGU6IHRydWUsXG4gICAgICBuZWVkc01hbnVhbFByb2Nlc3Npbmc6IHRydWUsXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIG5vdGU6ICdUdSByZXNlcnZhIGhhIHNpZG8gcmVnaXN0cmFkYS4gTm9zIHBvbmRyZW1vcyBlbiBjb250YWN0byBjb250aWdvIHBhcmEgY29uZmlybWFyIGxvcyBkZXRhbGxlcy4nXG4gICAgfSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdlbmVyYXRlQm9va2luZ1JlZmVyZW5jZSIsImxvYmJ5UE1TQ2xpZW50Iiwic2VuZFdoYXRzQXBwTWVzc2FnZSIsIlJPT01fVFlQRV9NQVBQSU5HIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsImNoZWNrSW4iLCJjaGVja091dCIsImd1ZXN0cyIsImNvbnRhY3RJbmZvIiwicm9vbVR5cGVJZCIsImFjdGl2aXRpZXMiLCJwYXltZW50SW50ZW50SWQiLCJib29raW5nUmVmZXJlbmNlIiwiY29uc29sZSIsImxvZyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiY2F0ZWdvcnlJZCIsImVycm9yIiwic3RhdHVzIiwibWFwcGluZ1VzZWQiLCJmb3JtYXREYXRlRm9yTG9iYnlQTVMiLCJkYXRlU3RyaW5nIiwiZGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiZm9ybWF0dGVkQ2hlY2tJbiIsImZvcm1hdHRlZENoZWNrT3V0Iiwib3JpZ2luYWwiLCJmb3JtYXR0ZWQiLCJib29raW5nRGF0YSIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsImd1ZXN0X2NvdW50IiwidG90YWxfYWR1bHRzIiwidG90YWxfY2hpbGRyZW4iLCJndWVzdF9uYW1lIiwiaG9sZGVyX25hbWUiLCJndWVzdF9lbWFpbCIsImVtYWlsIiwiZ3Vlc3RfcGhvbmUiLCJwaG9uZSIsImd1ZXN0X2RvY3VtZW50IiwiZG5pIiwiY3VzdG9tZXJfZG9jdW1lbnQiLCJjdXN0b21lcl9uYXRpb25hbGl0eSIsImNhdGVnb3J5X2lkIiwicm9vbV90eXBlX2lkIiwiYm9va2luZ19yZWZlcmVuY2UiLCJzb3VyY2UiLCJwYXltZW50X2ludGVudF9pZCIsIm5vdGVzIiwic3BlY2lhbF9yZXF1ZXN0cyIsInJlc2VydmF0aW9uRGF0YSIsImNyZWF0ZUJvb2tpbmciLCJ3YU1lc3NhZ2UiLCJ3aGF0c2FwcFJlc3VsdCIsIndoYXRzYXBwRXJyb3IiLCJzdWNjZXNzIiwicmVzZXJ2YXRpb25JZCIsInJlc2VydmF0aW9uX2lkIiwiaWQiLCJtZXNzYWdlIiwiZGVtb01vZGUiLCJsb2JieVBNU1Jlc3BvbnNlIiwibG9iYnlFcnJvciIsInJlc3BvbnNlIiwiZGF0YSIsImVycm9yX2NvZGUiLCJhZGp1c3RlZEJvb2tpbmdEYXRhIiwicmV0cnlSZXNlcnZhdGlvbkRhdGEiLCJhZGp1c3RlZCIsIm9yaWdpbmFsR3Vlc3RzIiwiZmluYWxHdWVzdHMiLCJyZXRyeUVycm9yIiwiYWxlcnRNZXNzYWdlIiwiYWxlcnRSZXN1bHQiLCJuZWVkc01hbnVhbFByb2Nlc3NpbmciLCJmYWxsYmFja1JlYXNvbiIsIm9yaWdpbmFsRXJyb3IiLCJub3RlIiwiZmFsbGJhY2tSZWZlcmVuY2UiLCJjcml0aWNhbEFsZXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/reserve/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/lobbypms.ts":
/*!*************************!*\
  !*** ./lib/lobbypms.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LobbyPMSClient: () => (/* binding */ LobbyPMSClient),\n/* harmony export */   lobbyPMSClient: () => (/* binding */ lobbyPMSClient)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\n// LobbyPMS API Configuration - REAL CREDENTIALS\nconst LOBBYPMS_BASE_URL = process.env.LOBBYPMS_API_URL || \"https://api.lobbypms.com/api/v1\";\nconst LOBBYPMS_API_TOKEN = process.env.LOBBYPMS_API_KEY || \"JNjeoLeXxTHFQSwUPQCgwBnCZktRVv7pfQ48uz2tyoNu6K9dW6D2US1cN9Mu\";\nclass LobbyPMSClient {\n    constructor(baseURL = LOBBYPMS_BASE_URL, apiToken = LOBBYPMS_API_TOKEN){\n        this.baseURL = baseURL;\n        this.apiToken = apiToken;\n    }\n    buildURL(endpoint, additionalParams) {\n        // Remove leading slash from endpoint if present to avoid replacing the entire path\n        const cleanEndpoint = endpoint.startsWith(\"/\") ? endpoint.slice(1) : endpoint;\n        // Ensure baseURL ends with slash for proper concatenation\n        const baseUrl = this.baseURL.endsWith(\"/\") ? this.baseURL : this.baseURL + \"/\";\n        const url = new URL(cleanEndpoint, baseUrl);\n        url.searchParams.set(\"api_token\", this.apiToken);\n        if (additionalParams) {\n            Object.entries(additionalParams).forEach(([key, value])=>{\n                url.searchParams.set(key, value);\n            });\n        }\n        console.log(\"\\uD83D\\uDD27 URL BUILD DEBUG:\", {\n            originalEndpoint: endpoint,\n            cleanEndpoint: cleanEndpoint,\n            baseUrl: baseUrl,\n            finalUrl: url.toString()\n        });\n        return url.toString();\n    }\n    /**\n   * Get available rooms\n   */ async getRooms(params) {\n        try {\n            const finalUrl = this.buildURL(\"/rooms\", params);\n            console.log(\"\\uD83D\\uDD0D ===== URL CONSTRUCTION ANALYSIS =====\");\n            console.log(\"\\uD83D\\uDD0D Base URL:\", this.baseURL);\n            console.log(\"\\uD83D\\uDD0D API Token:\", this.apiToken);\n            console.log(\"\\uD83D\\uDD0D Endpoint:\", \"/rooms\");\n            console.log(\"\\uD83D\\uDD0D Params:\", params);\n            console.log(\"\\uD83D\\uDD0D Final constructed URL:\", finalUrl);\n            console.log(\"\\uD83D\\uDD0D ===== COMPARISON =====\");\n            console.log(\"\\uD83D\\uDD0D Working Postman URL: https://api.lobbypms.com/api/v1/rooms?api_token=JNjeoLeXxTHFQSwUPQCgwBnCZktRVv7pfQ48uz2tyoNu6K9dW6D2US1cN9Mu\");\n            console.log(\"\\uD83D\\uDD0D App constructed URL:\", finalUrl);\n            console.log(\"\\uD83D\\uDD0D URLs match:\", finalUrl === \"https://api.lobbypms.com/api/v1/rooms?api_token=JNjeoLeXxTHFQSwUPQCgwBnCZktRVv7pfQ48uz2tyoNu6K9dW6D2US1cN9Mu\");\n            // First try with params, then without if no results\n            let response;\n            let responseData;\n            try {\n                console.log(\"\\uD83D\\uDE80 Making request to:\", finalUrl);\n                response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(finalUrl, {\n                    timeout: 10000,\n                    headers: {\n                        \"Accept\": \"application/json\",\n                        \"Content-Type\": \"application/json\",\n                        \"User-Agent\": \"SurfCampSantaTeresa/1.0\"\n                    }\n                });\n                responseData = response.data;\n                console.log(\"\\uD83D\\uDCE5 Response received - Status:\", response.status);\n                console.log(\"\\uD83D\\uDCE5 Response Content-Type:\", response.headers[\"content-type\"]);\n                console.log(\"\\uD83D\\uDCE5 Response Data Type:\", typeof responseData);\n                console.log(\"\\uD83D\\uDCE5 Response Size:\", JSON.stringify(responseData).length, \"characters\");\n                // Check if response is HTML\n                if (typeof responseData === \"string\" && responseData.includes(\"<!doctype html>\")) {\n                    console.log(\"\\uD83D\\uDEA8 ===== CRITICAL ERROR: HTML RESPONSE =====\");\n                    console.log(\"\\uD83D\\uDEA8 Expected: JSON data\");\n                    console.log(\"\\uD83D\\uDEA8 Received: HTML page\");\n                    console.log(\"\\uD83D\\uDEA8 This means the API endpoint is not working correctly\");\n                    console.log(\"\\uD83D\\uDEA8 Possible causes:\");\n                    console.log(\"   1. Wrong API endpoint URL\");\n                    console.log(\"   2. Invalid API token\");\n                    console.log(\"   3. API server routing issue\");\n                    console.log(\"   4. Authentication/authorization problem\");\n                    console.log(\"\\uD83D\\uDEA8 HTML content (first 300 chars):\", responseData.substring(0, 300));\n                    // Extract title from HTML for debugging\n                    const titleMatch = responseData.match(/<title>(.*?)<\\/title>/);\n                    if (titleMatch) {\n                        console.log(\"\\uD83D\\uDEA8 HTML Page Title:\", titleMatch[1]);\n                    }\n                    throw new Error(\"LobbyPMS API returned HTML instead of JSON. This indicates an API endpoint or authentication issue.\");\n                }\n                console.log(\"✅ Valid JSON response received\");\n            } catch (requestError) {\n                console.error(\"❌ Request failed:\", {\n                    message: requestError.message,\n                    status: requestError.response?.status,\n                    statusText: requestError.response?.statusText,\n                    url: finalUrl,\n                    responseType: typeof requestError.response?.data,\n                    responseLength: requestError.response?.data?.length || 0\n                });\n                // If we had parameters, try without them as fallback\n                if (params && Object.keys(params).length > 0) {\n                    console.log(\"\\uD83D\\uDD04 Trying without parameters as fallback...\");\n                    const fallbackUrl = this.buildURL(\"/rooms\");\n                    console.log(\"\\uD83D\\uDD04 Fallback URL:\", fallbackUrl);\n                    response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(fallbackUrl, {\n                        timeout: 10000,\n                        headers: {\n                            \"Accept\": \"application/json\",\n                            \"Content-Type\": \"application/json\",\n                            \"User-Agent\": \"SurfCampSantaTeresa/1.0\"\n                        }\n                    });\n                    responseData = response.data;\n                    console.log(\"\\uD83D\\uDCE5 Fallback response - Status:\", response.status);\n                    console.log(\"\\uD83D\\uDCE5 Fallback response - Content-Type:\", response.headers[\"content-type\"]);\n                    console.log(\"\\uD83D\\uDCE5 Fallback response - Data Type:\", typeof responseData);\n                    if (typeof responseData === \"string\" && responseData.includes(\"<!doctype html>\")) {\n                        console.log(\"\\uD83D\\uDEA8 Fallback also returned HTML - API endpoint is definitely broken\");\n                        throw new Error(\"LobbyPMS API consistently returns HTML instead of JSON. API endpoint is not working.\");\n                    }\n                } else {\n                    throw requestError;\n                }\n            }\n            console.log(\"\\uD83D\\uDCE5 LobbyPMS ROOMS API SUMMARY:\");\n            console.log(\"   Status Code:\", response.status);\n            console.log(\"   Content-Type:\", response.headers[\"content-type\"]);\n            console.log(\"   Response Type:\", typeof responseData);\n            console.log(\"   Response Size:\", JSON.stringify(responseData).length, \"characters\");\n            console.log(\"   Has .data property:\", !!(responseData && \"data\" in responseData));\n            console.log(\"   Categories count:\", responseData?.data?.length || 0);\n            console.log(\"   \\uD83D\\uDD0D REQUEST URL:\", this.buildURL(\"/rooms\", params));\n            console.log(\"   \\uD83D\\uDD0D REQUEST PARAMS:\", params);\n            console.log(\"   \\uD83D\\uDD0D API TOKEN (last 8 chars):\", this.apiToken.slice(-8));\n            // Check if we got HTML instead of JSON\n            if (typeof responseData === \"string\" && responseData.includes(\"<!doctype html>\")) {\n                console.log(\"❌ CRITICAL: API returned HTML page instead of JSON data\");\n                console.log(\"❌ This usually means:\");\n                console.log(\"   1. Wrong API endpoint URL\");\n                console.log(\"   2. Invalid API token\");\n                console.log(\"   3. API server is down\");\n                console.log(\"   4. Rate limiting or IP blocking\");\n                console.log(\"❌ HTML Title:\", responseData.match(/<title>(.*?)<\\/title>/)?.[1] || \"No title found\");\n            }\n            // Handle the actual API structure: {data: [categories]}\n            const categories = responseData?.data || [];\n            console.log(\"\\uD83D\\uDCCA Extracted categories:\", categories.length);\n            if (categories.length > 0) {\n                console.log(\"\\uD83D\\uDCCA First category structure:\", JSON.stringify(categories[0], null, 2));\n            }\n            const rooms = [];\n            // Extract rooms from each category\n            categories.forEach((category, index)=>{\n                console.log(`🏠 Processing category ${index + 1}:`, {\n                    id: category.category_id,\n                    name: category.name,\n                    capacity: category.capacity,\n                    quantity: category.quantity,\n                    roomsCount: category.rooms?.length || 0\n                });\n                if (category.rooms && Array.isArray(category.rooms)) {\n                    // Add the category as a room type - NO FALLBACK PRICES\n                    const room = {\n                        id: category.category_id?.toString() || \"\",\n                        name: category.name || \"Unknown Room\",\n                        room_type_id: category.category_id?.toString() || \"\",\n                        room_type_name: category.name || \"Unknown Room\",\n                        available_rooms: category.quantity || 1,\n                        capacity: category.capacity || 2,\n                        price_per_night: undefined,\n                        rate: undefined // NO fallback - use real data only\n                    };\n                    console.log(`✅ Added room:`, room);\n                    rooms.push(room);\n                } else {\n                    console.log(`❌ Category ${category.name} has no valid rooms array`);\n                }\n            });\n            console.log(\"\\uD83C\\uDFAF Final rooms array:\", rooms.length, \"rooms\");\n            return rooms;\n        } catch (error) {\n            console.error(\"❌ LobbyPMS getRooms DETAILED ERROR:\", {\n                message: error.message,\n                status: error.response?.status,\n                statusText: error.response?.statusText,\n                headers: error.response?.headers,\n                data: typeof error.response?.data === \"string\" ? error.response.data.substring(0, 200) : error.response?.data,\n                stack: error.stack,\n                url: this.buildURL(\"/rooms\", params),\n                config: {\n                    baseURL: this.baseURL,\n                    tokenLastChars: this.apiToken.slice(-8),\n                    paramsUsed: params\n                }\n            });\n            // Create specific error message based on the error type\n            let specificError = `LobbyPMS API Error: ${error.message}`;\n            if (error.response?.status === 401) {\n                specificError = \"Error de autenticaci\\xf3n: Token API inv\\xe1lido o expirado\";\n            } else if (error.response?.status === 403) {\n                specificError = \"Error de permisos: No tienes acceso a este recurso\";\n            } else if (error.response?.status === 404) {\n                specificError = \"Error de endpoint: La URL del API no es correcta\";\n            } else if (error.response?.status === 429) {\n                specificError = \"Error de l\\xedmite: Demasiadas solicitudes, intenta m\\xe1s tarde\";\n            } else if (error.response?.status >= 500) {\n                specificError = \"Error del servidor: El servidor de LobbyPMS est\\xe1 experimentando problemas\";\n            } else if (error.code === \"ECONNREFUSED\") {\n                specificError = \"Error de conexi\\xf3n: No se puede conectar al servidor de LobbyPMS\";\n            } else if (error.code === \"ENOTFOUND\") {\n                specificError = \"Error de DNS: No se puede resolver la URL del API\";\n            } else if (error.code === \"ETIMEDOUT\") {\n                specificError = \"Error de timeout: La solicitud tard\\xf3 demasiado tiempo\";\n            }\n            // Enhanced error object\n            const enhancedError = new Error(specificError);\n            enhancedError.originalError = error;\n            enhancedError.statusCode = error.response?.status;\n            enhancedError.apiUrl = this.buildURL(\"/rooms\", params);\n            throw enhancedError;\n        }\n    }\n    /**\n   * Get booking information\n   */ async getBookings(params) {\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(this.buildURL(\"/bookings\", params), {\n                timeout: 10000\n            });\n            return response.data || [];\n        } catch (error) {\n            console.error(\"LobbyPMS getBookings error:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Create a new booking\n   */ async createBooking(booking) {\n        try {\n            console.log(\"\\uD83D\\uDE80 ===== LOBBY PMS CREATE BOOKING =====\");\n            console.log(\"\\uD83D\\uDE80 Endpoint: /bookings\");\n            console.log(\"\\uD83D\\uDE80 Booking data:\", JSON.stringify(booking, null, 2));\n            const finalUrl = this.buildURL(\"/bookings\");\n            console.log(\"\\uD83D\\uDE80 Final URL:\", finalUrl);\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(finalUrl, booking, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\",\n                    \"User-Agent\": \"SurfCampSantaTeresa/1.0\"\n                },\n                timeout: 15000\n            });\n            console.log(\"✅ LobbyPMS createBooking successful:\");\n            console.log(\"   Status:\", response.status);\n            console.log(\"   Response:\", JSON.stringify(response.data, null, 2));\n            return response.data;\n        } catch (error) {\n            console.error(\"❌ LobbyPMS createBooking error:\", {\n                message: error.message,\n                status: error.response?.status,\n                statusText: error.response?.statusText,\n                responseType: typeof error.response?.data,\n                responseData: error.response?.data,\n                requestData: booking,\n                url: this.buildURL(\"/bookings\")\n            });\n            // Check if response is HTML (error page)\n            const responseData = error.response?.data;\n            if (typeof responseData === \"string\" && (responseData.includes(\"<!doctype html>\") || responseData.includes(\"<html\") || responseData.includes(\"<!DOCTYPE\"))) {\n                const titleMatch = responseData.match(/<title>(.*?)<\\/title>/i);\n                const title = titleMatch ? titleMatch[1] : \"Unknown HTML page\";\n                console.error(\"\\uD83D\\uDEA8 LobbyPMS createBooking returned HTML page instead of JSON:\");\n                console.error(\"\\uD83D\\uDEA8 Page title:\", title);\n                console.error(\"\\uD83D\\uDEA8 HTML preview:\", responseData.substring(0, 300));\n                throw new Error(`LobbyPMS createBooking API returned HTML page \"${title}\" instead of JSON - possible IP authorization or API token issue`);\n            }\n            throw error;\n        }\n    }\n    /**\n   * Get rates information\n   */ async getRates(params) {\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(this.buildURL(\"/rates\", params), {\n                timeout: 10000\n            });\n            return response.data || [];\n        } catch (error) {\n            console.error(\"LobbyPMS getRates error:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Get products/services\n   */ async getProducts() {\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(this.buildURL(\"/products\"), {\n                timeout: 10000\n            });\n            return response.data || [];\n        } catch (error) {\n            console.error(\"LobbyPMS getProducts error:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Get clients information\n   */ async getClients(params) {\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(this.buildURL(\"/clients\", params), {\n                timeout: 10000\n            });\n            return response.data || [];\n        } catch (error) {\n            console.error(\"LobbyPMS getClients error:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Get room availability, rates and restrictions for specific dates\n   * According to LobbyPMS API documentation: GET /api/v1/available-rooms\n   */ async getAvailableRooms(params) {\n        try {\n            // Convert ISO dates to YYYY-mm-dd format (required by API)\n            const startDate = params.start_date.includes(\"T\") ? params.start_date.split(\"T\")[0] : params.start_date;\n            const endDate = params.end_date.includes(\"T\") ? params.end_date.split(\"T\")[0] : params.end_date;\n            // Build parameters according to API documentation\n            const apiParams = {\n                start_date: startDate,\n                end_date: endDate\n            };\n            // Only add category_id if provided\n            if (params.category_id) {\n                apiParams.category_id = params.category_id;\n            }\n            const finalUrl = this.buildURL(\"/available-rooms\", apiParams);\n            console.log(\"\\uD83D\\uDD0D ===== LOBBY PMS AVAILABLE ROOMS API =====\");\n            console.log(\"\\uD83D\\uDD0D Endpoint: /available-rooms (CORRECT per documentation)\");\n            console.log(\"\\uD83D\\uDD0D Start date:\", startDate);\n            console.log(\"\\uD83D\\uDD0D End date:\", endDate);\n            console.log(\"\\uD83D\\uDD0D Category ID:\", params.category_id || \"All categories\");\n            console.log(\"\\uD83D\\uDD0D Final URL:\", finalUrl);\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(finalUrl, {\n                timeout: 15000,\n                headers: {\n                    \"Accept\": \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                    \"User-Agent\": \"SurfCampSantaTeresa/1.0\"\n                }\n            });\n            const responseData = response.data;\n            console.log(\"\\uD83D\\uDCE5 ===== API RESPONSE ANALYSIS =====\");\n            console.log(\"\\uD83D\\uDCE5 Status:\", response.status);\n            console.log(\"\\uD83D\\uDCE5 Content-Type:\", response.headers[\"content-type\"]);\n            console.log(\"\\uD83D\\uDCE5 Response Type:\", typeof responseData);\n            console.log(\"\\uD83D\\uDCE5 Has data property:\", !!(responseData && \"data\" in responseData));\n            console.log(\"\\uD83D\\uDCE5 Data length:\", responseData?.data?.length || 0);\n            // Validate response structure\n            if (!responseData || typeof responseData !== \"object\") {\n                throw new Error(\"Invalid response format from LobbyPMS API\");\n            }\n            // Check if response is HTML (error page)\n            if (typeof responseData === \"string\" && (responseData.includes(\"<!doctype html>\") || responseData.includes(\"<html\") || responseData.includes(\"<!DOCTYPE\"))) {\n                // Extract title from HTML for more specific error\n                const titleMatch = responseData.match(/<title>(.*?)<\\/title>/i);\n                const title = titleMatch ? titleMatch[1] : \"Unknown HTML page\";\n                console.error(\"\\uD83D\\uDEA8 LobbyPMS returned HTML page instead of JSON:\");\n                console.error(\"\\uD83D\\uDEA8 Page title:\", title);\n                console.error(\"\\uD83D\\uDEA8 HTML preview:\", responseData.substring(0, 300));\n                throw new Error(`LobbyPMS API returned HTML page \"${title}\" instead of JSON - possible IP authorization or API token issue`);\n            }\n            console.log(\"✅ Valid JSON response received from LobbyPMS\");\n            // Log response structure for debugging\n            const dataArray = responseData.data || [];\n            console.log(\"\\uD83D\\uDCCA Response summary:\");\n            console.log(\"   \\uD83D\\uDCC5 Days returned:\", dataArray.length);\n            if (dataArray.length > 0) {\n                console.log(\"   \\uD83D\\uDCC5 First day:\", dataArray[0].date);\n                console.log(\"   \\uD83C\\uDFE0 Categories in first day:\", dataArray[0].categories?.length || 0);\n                if (dataArray[0].categories && dataArray[0].categories.length > 0) {\n                    const firstCategory = dataArray[0].categories[0];\n                    console.log(\"   \\uD83C\\uDFE0 First category example:\", {\n                        id: firstCategory.category_id,\n                        name: firstCategory.name,\n                        available_rooms: firstCategory.available_rooms,\n                        prices: firstCategory.prices\n                    });\n                }\n            }\n            return dataArray;\n        } catch (error) {\n            const responseData = error.response?.data;\n            const isHtmlResponse = typeof responseData === \"string\" && (responseData.includes(\"<!doctype html>\") || responseData.includes(\"<html\") || responseData.includes(\"<!DOCTYPE\"));\n            console.error(\"❌ LOBBY PMS AVAILABLE ROOMS ERROR:\", {\n                message: error.message,\n                status: error.response?.status,\n                statusText: error.response?.statusText,\n                responseType: typeof responseData,\n                isHtmlResponse: isHtmlResponse,\n                responsePreview: typeof responseData === \"string\" ? responseData.substring(0, 300) : responseData,\n                requestUrl: this.buildURL(\"/available-rooms\", {\n                    start_date: params.start_date.includes(\"T\") ? params.start_date.split(\"T\")[0] : params.start_date,\n                    end_date: params.end_date.includes(\"T\") ? params.end_date.split(\"T\")[0] : params.end_date,\n                    ...params.category_id && {\n                        category_id: params.category_id\n                    }\n                }),\n                apiToken: this.apiToken.slice(-8)\n            });\n            // Enhanced error message based on response type\n            let errorMessage = `LobbyPMS available rooms API failed: ${error.message}`;\n            if (isHtmlResponse) {\n                const titleMatch = responseData.match(/<title>(.*?)<\\/title>/i);\n                const title = titleMatch ? titleMatch[1] : \"Unknown page\";\n                errorMessage = `LobbyPMS API returned HTML page \"${title}\" instead of JSON - check IP authorization and API token`;\n            }\n            throw new Error(errorMessage);\n        }\n    }\n    /**\n   * Check if API is configured and working\n   */ isConfigured() {\n        // Check if we have a valid API token that's not a placeholder\n        const hasValidToken = !!(this.apiToken && this.apiToken !== \"your_api_token_here\" && this.apiToken.length > 20 && !this.apiToken.includes(\"placeholder\"));\n        // Check if we have a valid base URL\n        const hasValidURL = !!(this.baseURL && this.baseURL !== \"https://your-api-url.com\" && !this.baseURL.includes(\"placeholder\") && this.baseURL.includes(\"lobbypms.com\"));\n        console.log(\"\\uD83D\\uDD27 LobbyPMS Configuration Check:\", {\n            hasValidToken,\n            hasValidURL,\n            tokenLength: this.apiToken?.length || 0,\n            baseURL: this.baseURL,\n            isConfigured: hasValidToken && hasValidURL\n        });\n        return hasValidToken && hasValidURL;\n    }\n    /**\n   * Test API connectivity\n   */ async testConnection() {\n        try {\n            // Use the correct endpoint for testing\n            await this.getAvailableRooms({\n                start_date: \"2025-01-01\",\n                end_date: \"2025-01-02\"\n            });\n            return true;\n        } catch (error) {\n            return false;\n        }\n    }\n}\n// Export a default instance\nconst lobbyPMSClient = new LobbyPMSClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM5RCxNQUFNQyxnQkFBZ0IsQ0FBQyxDQUFFLEtBQUksQ0FBQ3ZHLFFBQVEsSUFDaEIsSUFBSSxDQUFDQSxRQUFRLEtBQUsseUJBQ2xCLElBQUksQ0FBQ0EsUUFBUSxDQUFDa0MsTUFBTSxHQUFHLE1BQ3ZCLENBQUMsSUFBSSxDQUFDbEMsUUFBUSxDQUFDbUMsUUFBUSxDQUFDLGNBQWE7UUFFM0Qsb0NBQW9DO1FBQ3BDLE1BQU1xRSxjQUFjLENBQUMsQ0FBRSxLQUFJLENBQUN6RyxPQUFPLElBQ2hCLElBQUksQ0FBQ0EsT0FBTyxLQUFLLDhCQUNqQixDQUFDLElBQUksQ0FBQ0EsT0FBTyxDQUFDb0MsUUFBUSxDQUFDLGtCQUN2QixJQUFJLENBQUNwQyxPQUFPLENBQUNvQyxRQUFRLENBQUMsZUFBYztRQUV2RGpCLFFBQVFDLEdBQUcsQ0FBQyw4Q0FBb0M7WUFDOUNvRjtZQUNBQztZQUNBQyxhQUFhLElBQUksQ0FBQ3pHLFFBQVEsRUFBRWtDLFVBQVU7WUFDdENuQyxTQUFTLElBQUksQ0FBQ0EsT0FBTztZQUNyQnVHLGNBQWNDLGlCQUFpQkM7UUFDakM7UUFFQSxPQUFPRCxpQkFBaUJDO0lBQzFCO0lBRUE7O0dBRUMsR0FDRCxNQUFNRSxpQkFBbUM7UUFDdkMsSUFBSTtZQUNGLHVDQUF1QztZQUN2QyxNQUFNLElBQUksQ0FBQ25CLGlCQUFpQixDQUFDO2dCQUMzQkUsWUFBWTtnQkFDWkcsVUFBVTtZQUNaO1lBQ0EsT0FBTztRQUNULEVBQUUsT0FBT25ELE9BQU87WUFDZCxPQUFPO1FBQ1Q7SUFDRjtBQUNGO0FBRUEsNEJBQTRCO0FBQ3JCLE1BQU1rRSxpQkFBaUIsSUFBSTlHLGlCQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cmZjYW1wLWJvb2tpbmctc3lzdGVtLy4vbGliL2xvYmJ5cG1zLnRzPzIwZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zLCB7IEF4aW9zUmVzcG9uc2UgfSBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyBMb2JieVBNU0Jvb2tpbmcgfSBmcm9tICdAL3R5cGVzJztcblxuLy8gTG9iYnlQTVMgQVBJIENvbmZpZ3VyYXRpb24gLSBSRUFMIENSRURFTlRJQUxTXG5jb25zdCBMT0JCWVBNU19CQVNFX1VSTCA9IHByb2Nlc3MuZW52LkxPQkJZUE1TX0FQSV9VUkwgfHwgJ2h0dHBzOi8vYXBpLmxvYmJ5cG1zLmNvbS9hcGkvdjEnO1xuY29uc3QgTE9CQllQTVNfQVBJX1RPS0VOID0gcHJvY2Vzcy5lbnYuTE9CQllQTVNfQVBJX0tFWSB8fCAnSk5qZW9MZVh4VEhGUVN3VVBRQ2d3Qm5DWmt0UlZ2N3BmUTQ4dXoydHlvTnU2SzlkVzZEMlVTMWNOOU11JztcblxuZXhwb3J0IGludGVyZmFjZSBMb2JieVBNU1Jvb20ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHJvb21fdHlwZV9pZD86IHN0cmluZztcbiAgcm9vbV90eXBlX25hbWU/OiBzdHJpbmc7XG4gIGF2YWlsYWJsZV9yb29tcz86IG51bWJlcjtcbiAgcHJpY2VfcGVyX25pZ2h0PzogbnVtYmVyOyAvLyBNYWRlIG9wdGlvbmFsIGluc3RlYWQgb2YgcmVxdWlyaW5nIG51bWJlclxuICByYXRlPzogbnVtYmVyOyAvLyBNYWRlIG9wdGlvbmFsIGluc3RlYWQgb2YgcmVxdWlyaW5nIG51bWJlclxuICBjYXBhY2l0eT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIExvYmJ5UE1TQ2xpZW50IHtcbiAgcHJpdmF0ZSBiYXNlVVJMOiBzdHJpbmc7XG4gIHByaXZhdGUgYXBpVG9rZW46IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihiYXNlVVJMID0gTE9CQllQTVNfQkFTRV9VUkwsIGFwaVRva2VuID0gTE9CQllQTVNfQVBJX1RPS0VOKSB7XG4gICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICB0aGlzLmFwaVRva2VuID0gYXBpVG9rZW47XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkVVJMKGVuZHBvaW50OiBzdHJpbmcsIGFkZGl0aW9uYWxQYXJhbXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgbGVhZGluZyBzbGFzaCBmcm9tIGVuZHBvaW50IGlmIHByZXNlbnQgdG8gYXZvaWQgcmVwbGFjaW5nIHRoZSBlbnRpcmUgcGF0aFxuICAgIGNvbnN0IGNsZWFuRW5kcG9pbnQgPSBlbmRwb2ludC5zdGFydHNXaXRoKCcvJykgPyBlbmRwb2ludC5zbGljZSgxKSA6IGVuZHBvaW50O1xuICAgIFxuICAgIC8vIEVuc3VyZSBiYXNlVVJMIGVuZHMgd2l0aCBzbGFzaCBmb3IgcHJvcGVyIGNvbmNhdGVuYXRpb25cbiAgICBjb25zdCBiYXNlVXJsID0gdGhpcy5iYXNlVVJMLmVuZHNXaXRoKCcvJykgPyB0aGlzLmJhc2VVUkwgOiB0aGlzLmJhc2VVUkwgKyAnLyc7XG4gICAgXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChjbGVhbkVuZHBvaW50LCBiYXNlVXJsKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnYXBpX3Rva2VuJywgdGhpcy5hcGlUb2tlbik7XG4gICAgXG4gICAgaWYgKGFkZGl0aW9uYWxQYXJhbXMpIHtcbiAgICAgIE9iamVjdC5lbnRyaWVzKGFkZGl0aW9uYWxQYXJhbXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UpyBVUkwgQlVJTEQgREVCVUc6Jywge1xuICAgICAgb3JpZ2luYWxFbmRwb2ludDogZW5kcG9pbnQsXG4gICAgICBjbGVhbkVuZHBvaW50OiBjbGVhbkVuZHBvaW50LFxuICAgICAgYmFzZVVybDogYmFzZVVybCxcbiAgICAgIGZpbmFsVXJsOiB1cmwudG9TdHJpbmcoKVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYXZhaWxhYmxlIHJvb21zXG4gICAqL1xuICBhc3luYyBnZXRSb29tcyhwYXJhbXM/OiB7XG4gICAgYXJyaXZhbF9kYXRlPzogc3RyaW5nO1xuICAgIGRlcGFydHVyZV9kYXRlPzogc3RyaW5nO1xuICAgIGd1ZXN0X2NvdW50Pzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxMb2JieVBNU1Jvb21bXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaW5hbFVybCA9IHRoaXMuYnVpbGRVUkwoJy9yb29tcycsIHBhcmFtcyk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNID09PT09IFVSTCBDT05TVFJVQ1RJT04gQU5BTFlTSVMgPT09PT0nKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEJhc2UgVVJMOicsIHRoaXMuYmFzZVVSTCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBBUEkgVG9rZW46JywgdGhpcy5hcGlUb2tlbik7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBFbmRwb2ludDonLCAnL3Jvb21zJyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBQYXJhbXM6JywgcGFyYW1zKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEZpbmFsIGNvbnN0cnVjdGVkIFVSTDonLCBmaW5hbFVybCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSA9PT09PSBDT01QQVJJU09OID09PT09Jyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBXb3JraW5nIFBvc3RtYW4gVVJMOiBodHRwczovL2FwaS5sb2JieXBtcy5jb20vYXBpL3YxL3Jvb21zP2FwaV90b2tlbj1KTmplb0xlWHhUSEZRU3dVUFFDZ3dCbkNaa3RSVnY3cGZRNDh1ejJ0eW9OdTZLOWRXNkQyVVMxY045TXUnKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEFwcCBjb25zdHJ1Y3RlZCBVUkw6JywgZmluYWxVcmwpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gVVJMcyBtYXRjaDonLCBmaW5hbFVybCA9PT0gJ2h0dHBzOi8vYXBpLmxvYmJ5cG1zLmNvbS9hcGkvdjEvcm9vbXM/YXBpX3Rva2VuPUpOamVvTGVYeFRIRlFTd1VQUUNnd0JuQ1prdFJWdjdwZlE0OHV6MnR5b051Nks5ZFc2RDJVUzFjTjlNdScpO1xuICAgICAgXG4gICAgICAvLyBGaXJzdCB0cnkgd2l0aCBwYXJhbXMsIHRoZW4gd2l0aG91dCBpZiBubyByZXN1bHRzXG4gICAgICBsZXQgcmVzcG9uc2U6IEF4aW9zUmVzcG9uc2U8e2RhdGE6IGFueVtdfT47XG4gICAgICBsZXQgcmVzcG9uc2VEYXRhO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+agCBNYWtpbmcgcmVxdWVzdCB0bzonLCBmaW5hbFVybCk7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGZpbmFsVXJsLCB7IFxuICAgICAgICAgICAgICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiAnU3VyZkNhbXBTYW50YVRlcmVzYS8xLjAnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk6UgUmVzcG9uc2UgcmVjZWl2ZWQgLSBTdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk6UgUmVzcG9uc2UgQ29udGVudC1UeXBlOicsIHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk6UgUmVzcG9uc2UgRGF0YSBUeXBlOicsIHR5cGVvZiByZXNwb25zZURhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TpSBSZXNwb25zZSBTaXplOicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlRGF0YSkubGVuZ3RoLCAnY2hhcmFjdGVycycpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgcmVzcG9uc2UgaXMgSFRNTFxuICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlRGF0YSA9PT0gJ3N0cmluZycgJiYgKHJlc3BvbnNlRGF0YSBhcyBzdHJpbmcpLmluY2x1ZGVzKCc8IWRvY3R5cGUgaHRtbD4nKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5qoID09PT09IENSSVRJQ0FMIEVSUk9SOiBIVE1MIFJFU1BPTlNFID09PT09Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfmqggRXhwZWN0ZWQ6IEpTT04gZGF0YScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5qoIFJlY2VpdmVkOiBIVE1MIHBhZ2UnKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+aqCBUaGlzIG1lYW5zIHRoZSBBUEkgZW5kcG9pbnQgaXMgbm90IHdvcmtpbmcgY29ycmVjdGx5Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfmqggUG9zc2libGUgY2F1c2VzOicpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCcgICAxLiBXcm9uZyBBUEkgZW5kcG9pbnQgVVJMJyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJyAgIDIuIEludmFsaWQgQVBJIHRva2VuJyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJyAgIDMuIEFQSSBzZXJ2ZXIgcm91dGluZyBpc3N1ZScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCcgICA0LiBBdXRoZW50aWNhdGlvbi9hdXRob3JpemF0aW9uIHByb2JsZW0nKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+aqCBIVE1MIGNvbnRlbnQgKGZpcnN0IDMwMCBjaGFycyk6JywgKHJlc3BvbnNlRGF0YSBhcyBzdHJpbmcpLnN1YnN0cmluZygwLCAzMDApKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFeHRyYWN0IHRpdGxlIGZyb20gSFRNTCBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgY29uc3QgdGl0bGVNYXRjaCA9IChyZXNwb25zZURhdGEgYXMgc3RyaW5nKS5tYXRjaCgvPHRpdGxlPiguKj8pPFxcL3RpdGxlPi8pO1xuICAgICAgICAgIGlmICh0aXRsZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+aqCBIVE1MIFBhZ2UgVGl0bGU6JywgdGl0bGVNYXRjaFsxXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTG9iYnlQTVMgQVBJIHJldHVybmVkIEhUTUwgaW5zdGVhZCBvZiBKU09OLiBUaGlzIGluZGljYXRlcyBhbiBBUEkgZW5kcG9pbnQgb3IgYXV0aGVudGljYXRpb24gaXNzdWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgVmFsaWQgSlNPTiByZXNwb25zZSByZWNlaXZlZCcpO1xuICAgICAgICBcbiAgICAgIH0gY2F0Y2ggKHJlcXVlc3RFcnJvcjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBSZXF1ZXN0IGZhaWxlZDonLCB7XG4gICAgICAgICAgbWVzc2FnZTogcmVxdWVzdEVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgc3RhdHVzOiByZXF1ZXN0RXJyb3IucmVzcG9uc2U/LnN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0RXJyb3IucmVzcG9uc2U/LnN0YXR1c1RleHQsXG4gICAgICAgICAgdXJsOiBmaW5hbFVybCxcbiAgICAgICAgICByZXNwb25zZVR5cGU6IHR5cGVvZiByZXF1ZXN0RXJyb3IucmVzcG9uc2U/LmRhdGEsXG4gICAgICAgICAgcmVzcG9uc2VMZW5ndGg6IHJlcXVlc3RFcnJvci5yZXNwb25zZT8uZGF0YT8ubGVuZ3RoIHx8IDBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB3ZSBoYWQgcGFyYW1ldGVycywgdHJ5IHdpdGhvdXQgdGhlbSBhcyBmYWxsYmFja1xuICAgICAgICBpZiAocGFyYW1zICYmIE9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFRyeWluZyB3aXRob3V0IHBhcmFtZXRlcnMgYXMgZmFsbGJhY2suLi4nKTtcbiAgICAgICAgICBjb25zdCBmYWxsYmFja1VybCA9IHRoaXMuYnVpbGRVUkwoJy9yb29tcycpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIEZhbGxiYWNrIFVSTDonLCBmYWxsYmFja1VybCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoZmFsbGJhY2tVcmwsIHsgXG4gICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdTdXJmQ2FtcFNhbnRhVGVyZXNhLzEuMCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfk6UgRmFsbGJhY2sgcmVzcG9uc2UgLSBTdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+TpSBGYWxsYmFjayByZXNwb25zZSAtIENvbnRlbnQtVHlwZTonLCByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfk6UgRmFsbGJhY2sgcmVzcG9uc2UgLSBEYXRhIFR5cGU6JywgdHlwZW9mIHJlc3BvbnNlRGF0YSk7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlRGF0YSA9PT0gJ3N0cmluZycgJiYgKHJlc3BvbnNlRGF0YSBhcyBzdHJpbmcpLmluY2x1ZGVzKCc8IWRvY3R5cGUgaHRtbD4nKSkge1xuICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5qoIEZhbGxiYWNrIGFsc28gcmV0dXJuZWQgSFRNTCAtIEFQSSBlbmRwb2ludCBpcyBkZWZpbml0ZWx5IGJyb2tlbicpO1xuICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTG9iYnlQTVMgQVBJIGNvbnNpc3RlbnRseSByZXR1cm5zIEhUTUwgaW5zdGVhZCBvZiBKU09OLiBBUEkgZW5kcG9pbnQgaXMgbm90IHdvcmtpbmcuJyk7XG4gICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyByZXF1ZXN0RXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/Cfk6UgTG9iYnlQTVMgUk9PTVMgQVBJIFNVTU1BUlk6Jyk7XG4gICAgICBjb25zb2xlLmxvZygnICAgU3RhdHVzIENvZGU6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIGNvbnNvbGUubG9nKCcgICBDb250ZW50LVR5cGU6JywgcmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ10pO1xuICAgICAgY29uc29sZS5sb2coJyAgIFJlc3BvbnNlIFR5cGU6JywgdHlwZW9mIHJlc3BvbnNlRGF0YSk7XG4gICAgICBjb25zb2xlLmxvZygnICAgUmVzcG9uc2UgU2l6ZTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZURhdGEpLmxlbmd0aCwgJ2NoYXJhY3RlcnMnKTtcbiAgICAgIGNvbnNvbGUubG9nKCcgICBIYXMgLmRhdGEgcHJvcGVydHk6JywgISEocmVzcG9uc2VEYXRhICYmICdkYXRhJyBpbiByZXNwb25zZURhdGEpKTtcbiAgICAgIGNvbnNvbGUubG9nKCcgICBDYXRlZ29yaWVzIGNvdW50OicsIHJlc3BvbnNlRGF0YT8uZGF0YT8ubGVuZ3RoIHx8IDApO1xuICAgICAgY29uc29sZS5sb2coJyAgIPCflI0gUkVRVUVTVCBVUkw6JywgdGhpcy5idWlsZFVSTCgnL3Jvb21zJywgcGFyYW1zKSk7XG4gICAgICBjb25zb2xlLmxvZygnICAg8J+UjSBSRVFVRVNUIFBBUkFNUzonLCBwYXJhbXMpO1xuICAgICAgY29uc29sZS5sb2coJyAgIPCflI0gQVBJIFRPS0VOIChsYXN0IDggY2hhcnMpOicsIHRoaXMuYXBpVG9rZW4uc2xpY2UoLTgpKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgZ290IEhUTUwgaW5zdGVhZCBvZiBKU09OXG4gICAgICBpZiAodHlwZW9mIHJlc3BvbnNlRGF0YSA9PT0gJ3N0cmluZycgJiYgKHJlc3BvbnNlRGF0YSBhcyBzdHJpbmcpLmluY2x1ZGVzKCc8IWRvY3R5cGUgaHRtbD4nKSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIENSSVRJQ0FMOiBBUEkgcmV0dXJuZWQgSFRNTCBwYWdlIGluc3RlYWQgb2YgSlNPTiBkYXRhJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgVGhpcyB1c3VhbGx5IG1lYW5zOicpO1xuICAgICAgICBjb25zb2xlLmxvZygnICAgMS4gV3JvbmcgQVBJIGVuZHBvaW50IFVSTCcpO1xuICAgICAgICBjb25zb2xlLmxvZygnICAgMi4gSW52YWxpZCBBUEkgdG9rZW4nKTtcbiAgICAgICAgY29uc29sZS5sb2coJyAgIDMuIEFQSSBzZXJ2ZXIgaXMgZG93bicpO1xuICAgICAgICBjb25zb2xlLmxvZygnICAgNC4gUmF0ZSBsaW1pdGluZyBvciBJUCBibG9ja2luZycpO1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIEhUTUwgVGl0bGU6JywgKHJlc3BvbnNlRGF0YSBhcyBzdHJpbmcpLm1hdGNoKC88dGl0bGU+KC4qPyk8XFwvdGl0bGU+Lyk/LlsxXSB8fCAnTm8gdGl0bGUgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIHRoZSBhY3R1YWwgQVBJIHN0cnVjdHVyZToge2RhdGE6IFtjYXRlZ29yaWVzXX1cbiAgICAgIGNvbnN0IGNhdGVnb3JpZXMgPSByZXNwb25zZURhdGE/LmRhdGEgfHwgW107XG4gICAgICBjb25zb2xlLmxvZygn8J+TiiBFeHRyYWN0ZWQgY2F0ZWdvcmllczonLCBjYXRlZ29yaWVzLmxlbmd0aCk7XG4gICAgICBcbiAgICAgIGlmIChjYXRlZ29yaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk4ogRmlyc3QgY2F0ZWdvcnkgc3RydWN0dXJlOicsIEpTT04uc3RyaW5naWZ5KGNhdGVnb3JpZXNbMF0sIG51bGwsIDIpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3Qgcm9vbXM6IExvYmJ5UE1TUm9vbVtdID0gW107XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3Qgcm9vbXMgZnJvbSBlYWNoIGNhdGVnb3J5XG4gICAgICBjYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5OiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfj6AgUHJvY2Vzc2luZyBjYXRlZ29yeSAke2luZGV4ICsgMX06YCwge1xuICAgICAgICAgIGlkOiBjYXRlZ29yeS5jYXRlZ29yeV9pZCxcbiAgICAgICAgICBuYW1lOiBjYXRlZ29yeS5uYW1lLFxuICAgICAgICAgIGNhcGFjaXR5OiBjYXRlZ29yeS5jYXBhY2l0eSxcbiAgICAgICAgICBxdWFudGl0eTogY2F0ZWdvcnkucXVhbnRpdHksXG4gICAgICAgICAgcm9vbXNDb3VudDogY2F0ZWdvcnkucm9vbXM/Lmxlbmd0aCB8fCAwXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNhdGVnb3J5LnJvb21zICYmIEFycmF5LmlzQXJyYXkoY2F0ZWdvcnkucm9vbXMpKSB7XG4gICAgICAgICAgLy8gQWRkIHRoZSBjYXRlZ29yeSBhcyBhIHJvb20gdHlwZSAtIE5PIEZBTExCQUNLIFBSSUNFU1xuICAgICAgICAgIGNvbnN0IHJvb20gPSB7XG4gICAgICAgICAgICBpZDogY2F0ZWdvcnkuY2F0ZWdvcnlfaWQ/LnRvU3RyaW5nKCkgfHwgJycsXG4gICAgICAgICAgICBuYW1lOiBjYXRlZ29yeS5uYW1lIHx8ICdVbmtub3duIFJvb20nLFxuICAgICAgICAgICAgcm9vbV90eXBlX2lkOiBjYXRlZ29yeS5jYXRlZ29yeV9pZD8udG9TdHJpbmcoKSB8fCAnJyxcbiAgICAgICAgICAgIHJvb21fdHlwZV9uYW1lOiBjYXRlZ29yeS5uYW1lIHx8ICdVbmtub3duIFJvb20nLFxuICAgICAgICAgICAgYXZhaWxhYmxlX3Jvb21zOiBjYXRlZ29yeS5xdWFudGl0eSB8fCAxLFxuICAgICAgICAgICAgY2FwYWNpdHk6IGNhdGVnb3J5LmNhcGFjaXR5IHx8IDIsXG4gICAgICAgICAgICBwcmljZV9wZXJfbmlnaHQ6IHVuZGVmaW5lZCwgLy8gTk8gZmFsbGJhY2sgLSB1c2UgcmVhbCBkYXRhIG9ubHlcbiAgICAgICAgICAgIHJhdGU6IHVuZGVmaW5lZCAvLyBOTyBmYWxsYmFjayAtIHVzZSByZWFsIGRhdGEgb25seVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSBBZGRlZCByb29tOmAsIHJvb20pO1xuICAgICAgICAgIHJvb21zLnB1c2gocm9vbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKdjCBDYXRlZ29yeSAke2NhdGVnb3J5Lm5hbWV9IGhhcyBubyB2YWxpZCByb29tcyBhcnJheWApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/Cfjq8gRmluYWwgcm9vbXMgYXJyYXk6Jywgcm9vbXMubGVuZ3RoLCAncm9vbXMnKTtcbiAgICAgIHJldHVybiByb29tcztcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgTG9iYnlQTVMgZ2V0Um9vbXMgREVUQUlMRUQgRVJST1I6Jywge1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzdGF0dXM6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiBlcnJvci5yZXNwb25zZT8uaGVhZGVycyxcbiAgICAgICAgZGF0YTogdHlwZW9mIGVycm9yLnJlc3BvbnNlPy5kYXRhID09PSAnc3RyaW5nJyBcbiAgICAgICAgICA/IChlcnJvci5yZXNwb25zZS5kYXRhIGFzIHN0cmluZykuc3Vic3RyaW5nKDAsIDIwMCkgXG4gICAgICAgICAgOiBlcnJvci5yZXNwb25zZT8uZGF0YSxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgICB1cmw6IHRoaXMuYnVpbGRVUkwoJy9yb29tcycsIHBhcmFtcyksXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIGJhc2VVUkw6IHRoaXMuYmFzZVVSTCxcbiAgICAgICAgICB0b2tlbkxhc3RDaGFyczogdGhpcy5hcGlUb2tlbi5zbGljZSgtOCksXG4gICAgICAgICAgcGFyYW1zVXNlZDogcGFyYW1zXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDcmVhdGUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiB0aGUgZXJyb3IgdHlwZVxuICAgICAgbGV0IHNwZWNpZmljRXJyb3IgPSBgTG9iYnlQTVMgQVBJIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YDtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICBzcGVjaWZpY0Vycm9yID0gJ0Vycm9yIGRlIGF1dGVudGljYWNpw7NuOiBUb2tlbiBBUEkgaW52w6FsaWRvIG8gZXhwaXJhZG8nO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgc3BlY2lmaWNFcnJvciA9ICdFcnJvciBkZSBwZXJtaXNvczogTm8gdGllbmVzIGFjY2VzbyBhIGVzdGUgcmVjdXJzbyc7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBzcGVjaWZpY0Vycm9yID0gJ0Vycm9yIGRlIGVuZHBvaW50OiBMYSBVUkwgZGVsIEFQSSBubyBlcyBjb3JyZWN0YSc7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICBzcGVjaWZpY0Vycm9yID0gJ0Vycm9yIGRlIGzDrW1pdGU6IERlbWFzaWFkYXMgc29saWNpdHVkZXMsIGludGVudGEgbcOhcyB0YXJkZSc7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPj0gNTAwKSB7XG4gICAgICAgIHNwZWNpZmljRXJyb3IgPSAnRXJyb3IgZGVsIHNlcnZpZG9yOiBFbCBzZXJ2aWRvciBkZSBMb2JieVBNUyBlc3TDoSBleHBlcmltZW50YW5kbyBwcm9ibGVtYXMnO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnRUNPTk5SRUZVU0VEJykge1xuICAgICAgICBzcGVjaWZpY0Vycm9yID0gJ0Vycm9yIGRlIGNvbmV4acOzbjogTm8gc2UgcHVlZGUgY29uZWN0YXIgYWwgc2Vydmlkb3IgZGUgTG9iYnlQTVMnO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnRU5PVEZPVU5EJykge1xuICAgICAgICBzcGVjaWZpY0Vycm9yID0gJ0Vycm9yIGRlIEROUzogTm8gc2UgcHVlZGUgcmVzb2x2ZXIgbGEgVVJMIGRlbCBBUEknO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnRVRJTUVET1VUJykge1xuICAgICAgICBzcGVjaWZpY0Vycm9yID0gJ0Vycm9yIGRlIHRpbWVvdXQ6IExhIHNvbGljaXR1ZCB0YXJkw7MgZGVtYXNpYWRvIHRpZW1wbyc7XG4gICAgICB9XG5cbiAgICAgIC8vIEVuaGFuY2VkIGVycm9yIG9iamVjdFxuICAgICAgY29uc3QgZW5oYW5jZWRFcnJvciA9IG5ldyBFcnJvcihzcGVjaWZpY0Vycm9yKTtcbiAgICAgIChlbmhhbmNlZEVycm9yIGFzIGFueSkub3JpZ2luYWxFcnJvciA9IGVycm9yO1xuICAgICAgKGVuaGFuY2VkRXJyb3IgYXMgYW55KS5zdGF0dXNDb2RlID0gZXJyb3IucmVzcG9uc2U/LnN0YXR1cztcbiAgICAgIChlbmhhbmNlZEVycm9yIGFzIGFueSkuYXBpVXJsID0gdGhpcy5idWlsZFVSTCgnL3Jvb21zJywgcGFyYW1zKTtcbiAgICAgIFxuICAgICAgdGhyb3cgZW5oYW5jZWRFcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGJvb2tpbmcgaW5mb3JtYXRpb25cbiAgICovXG4gIGFzeW5jIGdldEJvb2tpbmdzKHBhcmFtcz86IHtcbiAgICBhcnJpdmFsX2RhdGU/OiBzdHJpbmc7XG4gICAgZGVwYXJ0dXJlX2RhdGU/OiBzdHJpbmc7XG4gICAgc3RhdHVzPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxMb2JieVBNU0Jvb2tpbmdbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZTogQXhpb3NSZXNwb25zZTxMb2JieVBNU0Jvb2tpbmdbXT4gPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgIHRoaXMuYnVpbGRVUkwoJy9ib29raW5ncycsIHBhcmFtcyksXG4gICAgICAgIHsgdGltZW91dDogMTAwMDAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhIHx8IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdMb2JieVBNUyBnZXRCb29raW5ncyBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGJvb2tpbmdcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUJvb2tpbmcoYm9va2luZzogTG9iYnlQTVNCb29raW5nKTogUHJvbWlzZTxMb2JieVBNU0Jvb2tpbmc+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CfmoAgPT09PT0gTE9CQlkgUE1TIENSRUFURSBCT09LSU5HID09PT09Jyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+agCBFbmRwb2ludDogL2Jvb2tpbmdzJyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+agCBCb29raW5nIGRhdGE6JywgSlNPTi5zdHJpbmdpZnkoYm9va2luZywgbnVsbCwgMikpO1xuICAgICAgXG4gICAgICBjb25zdCBmaW5hbFVybCA9IHRoaXMuYnVpbGRVUkwoJy9ib29raW5ncycpO1xuICAgICAgY29uc29sZS5sb2coJ/CfmoAgRmluYWwgVVJMOicsIGZpbmFsVXJsKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2U6IEF4aW9zUmVzcG9uc2U8TG9iYnlQTVNCb29raW5nPiA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgIGZpbmFsVXJsLFxuICAgICAgICBib29raW5nLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczogeyBcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnU3VyZkNhbXBTYW50YVRlcmVzYS8xLjAnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aW1lb3V0OiAxNTAwMFxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn4pyFIExvYmJ5UE1TIGNyZWF0ZUJvb2tpbmcgc3VjY2Vzc2Z1bDonKTtcbiAgICAgIGNvbnNvbGUubG9nKCcgICBTdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIGNvbnNvbGUubG9nKCcgICBSZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLCBudWxsLCAyKSk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBMb2JieVBNUyBjcmVhdGVCb29raW5nIGVycm9yOicsIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhdHVzOiBlcnJvci5yZXNwb25zZT8uc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiBlcnJvci5yZXNwb25zZT8uc3RhdHVzVGV4dCxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiB0eXBlb2YgZXJyb3IucmVzcG9uc2U/LmRhdGEsXG4gICAgICAgIHJlc3BvbnNlRGF0YTogZXJyb3IucmVzcG9uc2U/LmRhdGEsXG4gICAgICAgIHJlcXVlc3REYXRhOiBib29raW5nLFxuICAgICAgICB1cmw6IHRoaXMuYnVpbGRVUkwoJy9ib29raW5ncycpXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgcmVzcG9uc2UgaXMgSFRNTCAoZXJyb3IgcGFnZSlcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhO1xuICAgICAgaWYgKHR5cGVvZiByZXNwb25zZURhdGEgPT09ICdzdHJpbmcnICYmIFxuICAgICAgICAgIChyZXNwb25zZURhdGEuaW5jbHVkZXMoJzwhZG9jdHlwZSBodG1sPicpIHx8IFxuICAgICAgICAgICByZXNwb25zZURhdGEuaW5jbHVkZXMoJzxodG1sJykgfHwgXG4gICAgICAgICAgIHJlc3BvbnNlRGF0YS5pbmNsdWRlcygnPCFET0NUWVBFJykpKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aXRsZU1hdGNoID0gcmVzcG9uc2VEYXRhLm1hdGNoKC88dGl0bGU+KC4qPyk8XFwvdGl0bGU+L2kpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IHRpdGxlTWF0Y2ggPyB0aXRsZU1hdGNoWzFdIDogJ1Vua25vd24gSFRNTCBwYWdlJztcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfmqggTG9iYnlQTVMgY3JlYXRlQm9va2luZyByZXR1cm5lZCBIVE1MIHBhZ2UgaW5zdGVhZCBvZiBKU09OOicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCfwn5qoIFBhZ2UgdGl0bGU6JywgdGl0bGUpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCfwn5qoIEhUTUwgcHJldmlldzonLCByZXNwb25zZURhdGEuc3Vic3RyaW5nKDAsIDMwMCkpO1xuICAgICAgICBcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBMb2JieVBNUyBjcmVhdGVCb29raW5nIEFQSSByZXR1cm5lZCBIVE1MIHBhZ2UgXCIke3RpdGxlfVwiIGluc3RlYWQgb2YgSlNPTiAtIHBvc3NpYmxlIElQIGF1dGhvcml6YXRpb24gb3IgQVBJIHRva2VuIGlzc3VlYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcmF0ZXMgaW5mb3JtYXRpb25cbiAgICovXG4gIGFzeW5jIGdldFJhdGVzKHBhcmFtcz86IHtcbiAgICByb29tX3R5cGVfaWQ/OiBzdHJpbmc7XG4gICAgYXJyaXZhbF9kYXRlPzogc3RyaW5nO1xuICAgIGRlcGFydHVyZV9kYXRlPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgICAgdGhpcy5idWlsZFVSTCgnL3JhdGVzJywgcGFyYW1zKSxcbiAgICAgICAgeyB0aW1lb3V0OiAxMDAwMCB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0xvYmJ5UE1TIGdldFJhdGVzIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcHJvZHVjdHMvc2VydmljZXNcbiAgICovXG4gIGFzeW5jIGdldFByb2R1Y3RzKCk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgIHRoaXMuYnVpbGRVUkwoJy9wcm9kdWN0cycpLFxuICAgICAgICB7IHRpbWVvdXQ6IDEwMDAwIH1cbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YSB8fCBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignTG9iYnlQTVMgZ2V0UHJvZHVjdHMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjbGllbnRzIGluZm9ybWF0aW9uXG4gICAqL1xuICBhc3luYyBnZXRDbGllbnRzKHBhcmFtcz86IHtcbiAgICBlbWFpbD86IHN0cmluZztcbiAgICBwaG9uZT86IHN0cmluZztcbiAgfSk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgIHRoaXMuYnVpbGRVUkwoJy9jbGllbnRzJywgcGFyYW1zKSxcbiAgICAgICAgeyB0aW1lb3V0OiAxMDAwMCB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0xvYmJ5UE1TIGdldENsaWVudHMgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCByb29tIGF2YWlsYWJpbGl0eSwgcmF0ZXMgYW5kIHJlc3RyaWN0aW9ucyBmb3Igc3BlY2lmaWMgZGF0ZXNcbiAgICogQWNjb3JkaW5nIHRvIExvYmJ5UE1TIEFQSSBkb2N1bWVudGF0aW9uOiBHRVQgL2FwaS92MS9hdmFpbGFibGUtcm9vbXNcbiAgICovXG4gIGFzeW5jIGdldEF2YWlsYWJsZVJvb21zKHBhcmFtczoge1xuICAgIHN0YXJ0X2RhdGU6IHN0cmluZztcbiAgICBlbmRfZGF0ZTogc3RyaW5nO1xuICAgIGNhdGVnb3J5X2lkPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDb252ZXJ0IElTTyBkYXRlcyB0byBZWVlZLW1tLWRkIGZvcm1hdCAocmVxdWlyZWQgYnkgQVBJKVxuICAgICAgY29uc3Qgc3RhcnREYXRlID0gcGFyYW1zLnN0YXJ0X2RhdGUuaW5jbHVkZXMoJ1QnKSA/IHBhcmFtcy5zdGFydF9kYXRlLnNwbGl0KCdUJylbMF0gOiBwYXJhbXMuc3RhcnRfZGF0ZTtcbiAgICAgIGNvbnN0IGVuZERhdGUgPSBwYXJhbXMuZW5kX2RhdGUuaW5jbHVkZXMoJ1QnKSA/IHBhcmFtcy5lbmRfZGF0ZS5zcGxpdCgnVCcpWzBdIDogcGFyYW1zLmVuZF9kYXRlO1xuICAgICAgXG4gICAgICAvLyBCdWlsZCBwYXJhbWV0ZXJzIGFjY29yZGluZyB0byBBUEkgZG9jdW1lbnRhdGlvblxuICAgICAgY29uc3QgYXBpUGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICBzdGFydF9kYXRlOiBzdGFydERhdGUsXG4gICAgICAgIGVuZF9kYXRlOiBlbmREYXRlXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBPbmx5IGFkZCBjYXRlZ29yeV9pZCBpZiBwcm92aWRlZFxuICAgICAgaWYgKHBhcmFtcy5jYXRlZ29yeV9pZCkge1xuICAgICAgICBhcGlQYXJhbXMuY2F0ZWdvcnlfaWQgPSBwYXJhbXMuY2F0ZWdvcnlfaWQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGZpbmFsVXJsID0gdGhpcy5idWlsZFVSTCgnL2F2YWlsYWJsZS1yb29tcycsIGFwaVBhcmFtcyk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNID09PT09IExPQkJZIFBNUyBBVkFJTEFCTEUgUk9PTVMgQVBJID09PT09Jyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBFbmRwb2ludDogL2F2YWlsYWJsZS1yb29tcyAoQ09SUkVDVCBwZXIgZG9jdW1lbnRhdGlvbiknKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFN0YXJ0IGRhdGU6Jywgc3RhcnREYXRlKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEVuZCBkYXRlOicsIGVuZERhdGUpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gQ2F0ZWdvcnkgSUQ6JywgcGFyYW1zLmNhdGVnb3J5X2lkIHx8ICdBbGwgY2F0ZWdvcmllcycpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gRmluYWwgVVJMOicsIGZpbmFsVXJsKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoZmluYWxVcmwsIHsgXG4gICAgICAgICAgICAgIHRpbWVvdXQ6IDE1MDAwLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnVXNlci1BZ2VudCc6ICdTdXJmQ2FtcFNhbnRhVGVyZXNhLzEuMCdcbiAgICAgIH1cbiAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/Cfk6UgPT09PT0gQVBJIFJFU1BPTlNFIEFOQUxZU0lTID09PT09Jyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TpSBTdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OlIENvbnRlbnQtVHlwZTonLCByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+TpSBSZXNwb25zZSBUeXBlOicsIHR5cGVvZiByZXNwb25zZURhdGEpO1xuICAgICAgY29uc29sZS5sb2coJ/Cfk6UgSGFzIGRhdGEgcHJvcGVydHk6JywgISEocmVzcG9uc2VEYXRhICYmICdkYXRhJyBpbiByZXNwb25zZURhdGEpKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OlIERhdGEgbGVuZ3RoOicsIHJlc3BvbnNlRGF0YT8uZGF0YT8ubGVuZ3RoIHx8IDApO1xuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSByZXNwb25zZSBzdHJ1Y3R1cmVcbiAgICAgIGlmICghcmVzcG9uc2VEYXRhIHx8IHR5cGVvZiByZXNwb25zZURhdGEgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBMb2JieVBNUyBBUEknKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgcmVzcG9uc2UgaXMgSFRNTCAoZXJyb3IgcGFnZSlcbiAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2VEYXRhID09PSAnc3RyaW5nJyAmJiBcbiAgICAgICAgICAocmVzcG9uc2VEYXRhLmluY2x1ZGVzKCc8IWRvY3R5cGUgaHRtbD4nKSB8fCBcbiAgICAgICAgICAgcmVzcG9uc2VEYXRhLmluY2x1ZGVzKCc8aHRtbCcpIHx8IFxuICAgICAgICAgICByZXNwb25zZURhdGEuaW5jbHVkZXMoJzwhRE9DVFlQRScpKSkge1xuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFjdCB0aXRsZSBmcm9tIEhUTUwgZm9yIG1vcmUgc3BlY2lmaWMgZXJyb3JcbiAgICAgICAgY29uc3QgdGl0bGVNYXRjaCA9IHJlc3BvbnNlRGF0YS5tYXRjaCgvPHRpdGxlPiguKj8pPFxcL3RpdGxlPi9pKTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aXRsZU1hdGNoID8gdGl0bGVNYXRjaFsxXSA6ICdVbmtub3duIEhUTUwgcGFnZSc7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmVycm9yKCfwn5qoIExvYmJ5UE1TIHJldHVybmVkIEhUTUwgcGFnZSBpbnN0ZWFkIG9mIEpTT046Jyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfmqggUGFnZSB0aXRsZTonLCB0aXRsZSk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfmqggSFRNTCBwcmV2aWV3OicsIHJlc3BvbnNlRGF0YS5zdWJzdHJpbmcoMCwgMzAwKSk7XG4gICAgICAgIFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExvYmJ5UE1TIEFQSSByZXR1cm5lZCBIVE1MIHBhZ2UgXCIke3RpdGxlfVwiIGluc3RlYWQgb2YgSlNPTiAtIHBvc3NpYmxlIElQIGF1dGhvcml6YXRpb24gb3IgQVBJIHRva2VuIGlzc3VlYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgVmFsaWQgSlNPTiByZXNwb25zZSByZWNlaXZlZCBmcm9tIExvYmJ5UE1TJyk7XG4gICAgICBcbiAgICAgIC8vIExvZyByZXNwb25zZSBzdHJ1Y3R1cmUgZm9yIGRlYnVnZ2luZ1xuICAgICAgY29uc3QgZGF0YUFycmF5ID0gcmVzcG9uc2VEYXRhLmRhdGEgfHwgW107XG4gICAgICBjb25zb2xlLmxvZygn8J+TiiBSZXNwb25zZSBzdW1tYXJ5OicpO1xuICAgICAgY29uc29sZS5sb2coJyAgIPCfk4UgRGF5cyByZXR1cm5lZDonLCBkYXRhQXJyYXkubGVuZ3RoKTtcbiAgICAgIFxuICAgICAgaWYgKGRhdGFBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCcgICDwn5OFIEZpcnN0IGRheTonLCBkYXRhQXJyYXlbMF0uZGF0ZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCcgICDwn4+gIENhdGVnb3JpZXMgaW4gZmlyc3QgZGF5OicsIGRhdGFBcnJheVswXS5jYXRlZ29yaWVzPy5sZW5ndGggfHwgMCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGF0YUFycmF5WzBdLmNhdGVnb3JpZXMgJiYgZGF0YUFycmF5WzBdLmNhdGVnb3JpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGZpcnN0Q2F0ZWdvcnkgPSBkYXRhQXJyYXlbMF0uY2F0ZWdvcmllc1swXTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnICAg8J+PoCBGaXJzdCBjYXRlZ29yeSBleGFtcGxlOicsIHtcbiAgICAgICAgICAgIGlkOiBmaXJzdENhdGVnb3J5LmNhdGVnb3J5X2lkLFxuICAgICAgICAgICAgbmFtZTogZmlyc3RDYXRlZ29yeS5uYW1lLFxuICAgICAgICAgICAgYXZhaWxhYmxlX3Jvb21zOiBmaXJzdENhdGVnb3J5LmF2YWlsYWJsZV9yb29tcyxcbiAgICAgICAgICAgIHByaWNlczogZmlyc3RDYXRlZ29yeS5wcmljZXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YUFycmF5O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gZXJyb3IucmVzcG9uc2U/LmRhdGE7XG4gICAgICBjb25zdCBpc0h0bWxSZXNwb25zZSA9IHR5cGVvZiByZXNwb25zZURhdGEgPT09ICdzdHJpbmcnICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzcG9uc2VEYXRhLmluY2x1ZGVzKCc8IWRvY3R5cGUgaHRtbD4nKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YS5pbmNsdWRlcygnPGh0bWwnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YS5pbmNsdWRlcygnPCFET0NUWVBFJykpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgTE9CQlkgUE1TIEFWQUlMQUJMRSBST09NUyBFUlJPUjonLCB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YXR1czogZXJyb3IucmVzcG9uc2U/LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogZXJyb3IucmVzcG9uc2U/LnN0YXR1c1RleHQsXG4gICAgICAgIHJlc3BvbnNlVHlwZTogdHlwZW9mIHJlc3BvbnNlRGF0YSxcbiAgICAgICAgaXNIdG1sUmVzcG9uc2U6IGlzSHRtbFJlc3BvbnNlLFxuICAgICAgICByZXNwb25zZVByZXZpZXc6IHR5cGVvZiByZXNwb25zZURhdGEgPT09ICdzdHJpbmcnIFxuICAgICAgICAgID8gcmVzcG9uc2VEYXRhLnN1YnN0cmluZygwLCAzMDApIFxuICAgICAgICAgIDogcmVzcG9uc2VEYXRhLFxuICAgICAgICByZXF1ZXN0VXJsOiB0aGlzLmJ1aWxkVVJMKCcvYXZhaWxhYmxlLXJvb21zJywge1xuICAgICAgICAgIHN0YXJ0X2RhdGU6IHBhcmFtcy5zdGFydF9kYXRlLmluY2x1ZGVzKCdUJykgPyBwYXJhbXMuc3RhcnRfZGF0ZS5zcGxpdCgnVCcpWzBdIDogcGFyYW1zLnN0YXJ0X2RhdGUsXG4gICAgICAgICAgZW5kX2RhdGU6IHBhcmFtcy5lbmRfZGF0ZS5pbmNsdWRlcygnVCcpID8gcGFyYW1zLmVuZF9kYXRlLnNwbGl0KCdUJylbMF0gOiBwYXJhbXMuZW5kX2RhdGUsXG4gICAgICAgICAgLi4uKHBhcmFtcy5jYXRlZ29yeV9pZCAmJiB7IGNhdGVnb3J5X2lkOiBwYXJhbXMuY2F0ZWdvcnlfaWQgfSlcbiAgICAgICAgfSksXG4gICAgICAgIGFwaVRva2VuOiB0aGlzLmFwaVRva2VuLnNsaWNlKC04KVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEVuaGFuY2VkIGVycm9yIG1lc3NhZ2UgYmFzZWQgb24gcmVzcG9uc2UgdHlwZVxuICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IGBMb2JieVBNUyBhdmFpbGFibGUgcm9vbXMgQVBJIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICBcbiAgICAgIGlmIChpc0h0bWxSZXNwb25zZSkge1xuICAgICAgICBjb25zdCB0aXRsZU1hdGNoID0gcmVzcG9uc2VEYXRhLm1hdGNoKC88dGl0bGU+KC4qPyk8XFwvdGl0bGU+L2kpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IHRpdGxlTWF0Y2ggPyB0aXRsZU1hdGNoWzFdIDogJ1Vua25vd24gcGFnZSc7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGBMb2JieVBNUyBBUEkgcmV0dXJuZWQgSFRNTCBwYWdlIFwiJHt0aXRsZX1cIiBpbnN0ZWFkIG9mIEpTT04gLSBjaGVjayBJUCBhdXRob3JpemF0aW9uIGFuZCBBUEkgdG9rZW5gO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgQVBJIGlzIGNvbmZpZ3VyZWQgYW5kIHdvcmtpbmdcbiAgICovXG4gIGlzQ29uZmlndXJlZCgpOiBib29sZWFuIHtcbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGEgdmFsaWQgQVBJIHRva2VuIHRoYXQncyBub3QgYSBwbGFjZWhvbGRlclxuICAgIGNvbnN0IGhhc1ZhbGlkVG9rZW4gPSAhISh0aGlzLmFwaVRva2VuICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwaVRva2VuICE9PSAneW91cl9hcGlfdG9rZW5faGVyZScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcGlUb2tlbi5sZW5ndGggPiAyMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5hcGlUb2tlbi5pbmNsdWRlcygncGxhY2Vob2xkZXInKSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhIHZhbGlkIGJhc2UgVVJMXG4gICAgY29uc3QgaGFzVmFsaWRVUkwgPSAhISh0aGlzLmJhc2VVUkwgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFzZVVSTCAhPT0gJ2h0dHBzOi8veW91ci1hcGktdXJsLmNvbScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuYmFzZVVSTC5pbmNsdWRlcygncGxhY2Vob2xkZXInKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhc2VVUkwuaW5jbHVkZXMoJ2xvYmJ5cG1zLmNvbScpKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UpyBMb2JieVBNUyBDb25maWd1cmF0aW9uIENoZWNrOicsIHtcbiAgICAgIGhhc1ZhbGlkVG9rZW4sXG4gICAgICBoYXNWYWxpZFVSTCxcbiAgICAgIHRva2VuTGVuZ3RoOiB0aGlzLmFwaVRva2VuPy5sZW5ndGggfHwgMCxcbiAgICAgIGJhc2VVUkw6IHRoaXMuYmFzZVVSTCxcbiAgICAgIGlzQ29uZmlndXJlZDogaGFzVmFsaWRUb2tlbiAmJiBoYXNWYWxpZFVSTFxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBoYXNWYWxpZFRva2VuICYmIGhhc1ZhbGlkVVJMO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgQVBJIGNvbm5lY3Rpdml0eVxuICAgKi9cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSB0aGUgY29ycmVjdCBlbmRwb2ludCBmb3IgdGVzdGluZ1xuICAgICAgYXdhaXQgdGhpcy5nZXRBdmFpbGFibGVSb29tcyh7XG4gICAgICAgIHN0YXJ0X2RhdGU6ICcyMDI1LTAxLTAxJyxcbiAgICAgICAgZW5kX2RhdGU6ICcyMDI1LTAxLTAyJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG4vLyBFeHBvcnQgYSBkZWZhdWx0IGluc3RhbmNlXG5leHBvcnQgY29uc3QgbG9iYnlQTVNDbGllbnQgPSBuZXcgTG9iYnlQTVNDbGllbnQoKTsgIl0sIm5hbWVzIjpbImF4aW9zIiwiTE9CQllQTVNfQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTE9CQllQTVNfQVBJX1VSTCIsIkxPQkJZUE1TX0FQSV9UT0tFTiIsIkxPQkJZUE1TX0FQSV9LRVkiLCJMb2JieVBNU0NsaWVudCIsImNvbnN0cnVjdG9yIiwiYmFzZVVSTCIsImFwaVRva2VuIiwiYnVpbGRVUkwiLCJlbmRwb2ludCIsImFkZGl0aW9uYWxQYXJhbXMiLCJjbGVhbkVuZHBvaW50Iiwic3RhcnRzV2l0aCIsInNsaWNlIiwiYmFzZVVybCIsImVuZHNXaXRoIiwidXJsIiwiVVJMIiwic2VhcmNoUGFyYW1zIiwic2V0IiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJvcmlnaW5hbEVuZHBvaW50IiwiZmluYWxVcmwiLCJ0b1N0cmluZyIsImdldFJvb21zIiwicGFyYW1zIiwicmVzcG9uc2UiLCJyZXNwb25zZURhdGEiLCJnZXQiLCJ0aW1lb3V0IiwiaGVhZGVycyIsImRhdGEiLCJzdGF0dXMiLCJKU09OIiwic3RyaW5naWZ5IiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJzdWJzdHJpbmciLCJ0aXRsZU1hdGNoIiwibWF0Y2giLCJFcnJvciIsInJlcXVlc3RFcnJvciIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1c1RleHQiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZUxlbmd0aCIsImtleXMiLCJmYWxsYmFja1VybCIsImNhdGVnb3JpZXMiLCJyb29tcyIsImNhdGVnb3J5IiwiaW5kZXgiLCJpZCIsImNhdGVnb3J5X2lkIiwibmFtZSIsImNhcGFjaXR5IiwicXVhbnRpdHkiLCJyb29tc0NvdW50IiwiQXJyYXkiLCJpc0FycmF5Iiwicm9vbSIsInJvb21fdHlwZV9pZCIsInJvb21fdHlwZV9uYW1lIiwiYXZhaWxhYmxlX3Jvb21zIiwicHJpY2VfcGVyX25pZ2h0IiwidW5kZWZpbmVkIiwicmF0ZSIsInB1c2giLCJzdGFjayIsImNvbmZpZyIsInRva2VuTGFzdENoYXJzIiwicGFyYW1zVXNlZCIsInNwZWNpZmljRXJyb3IiLCJjb2RlIiwiZW5oYW5jZWRFcnJvciIsIm9yaWdpbmFsRXJyb3IiLCJzdGF0dXNDb2RlIiwiYXBpVXJsIiwiZ2V0Qm9va2luZ3MiLCJjcmVhdGVCb29raW5nIiwiYm9va2luZyIsInBvc3QiLCJyZXF1ZXN0RGF0YSIsInRpdGxlIiwiZ2V0UmF0ZXMiLCJnZXRQcm9kdWN0cyIsImdldENsaWVudHMiLCJnZXRBdmFpbGFibGVSb29tcyIsInN0YXJ0RGF0ZSIsInN0YXJ0X2RhdGUiLCJzcGxpdCIsImVuZERhdGUiLCJlbmRfZGF0ZSIsImFwaVBhcmFtcyIsImRhdGFBcnJheSIsImRhdGUiLCJmaXJzdENhdGVnb3J5IiwicHJpY2VzIiwiaXNIdG1sUmVzcG9uc2UiLCJyZXNwb25zZVByZXZpZXciLCJyZXF1ZXN0VXJsIiwiZXJyb3JNZXNzYWdlIiwiaXNDb25maWd1cmVkIiwiaGFzVmFsaWRUb2tlbiIsImhhc1ZhbGlkVVJMIiwidG9rZW5MZW5ndGgiLCJ0ZXN0Q29ubmVjdGlvbiIsImxvYmJ5UE1TQ2xpZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/lobbypms.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils.ts":
/*!**********************!*\
  !*** ./lib/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateNights: () => (/* binding */ calculateNights),\n/* harmony export */   cn: () => (/* binding */ cn),\n/* harmony export */   formatCurrency: () => (/* binding */ formatCurrency),\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   generateBookingReference: () => (/* binding */ generateBookingReference),\n/* harmony export */   validateDateRange: () => (/* binding */ validateDateRange),\n/* harmony export */   validateGuestCount: () => (/* binding */ validateGuestCount)\n/* harmony export */ });\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(rsc)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tailwind-merge */ \"(rsc)/./node_modules/tailwind-merge/dist/lib/tw-merge.mjs\");\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns/format */ \"(rsc)/./node_modules/date-fns/esm/format/index.js\");\n/* harmony import */ var date_fns_differenceInDays__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns/differenceInDays */ \"(rsc)/./node_modules/date-fns/esm/differenceInDays/index.js\");\n/* harmony import */ var date_fns_isAfter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns/isAfter */ \"(rsc)/./node_modules/date-fns/esm/isAfter/index.js\");\n/* harmony import */ var date_fns_isBefore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns/isBefore */ \"(rsc)/./node_modules/date-fns/esm/isBefore/index.js\");\n/* harmony import */ var date_fns_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns/locale */ \"(rsc)/./node_modules/date-fns/esm/locale/es/index.js\");\n\n\n\n\n\n\n\nfunction cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\nfunction formatCurrency(amount, currency = \"USD\") {\n    return new Intl.NumberFormat(\"en-US\", {\n        style: \"currency\",\n        currency: currency\n    }).format(amount);\n}\nfunction formatDate(date, pattern = \"dd/MM/yyyy\") {\n    return (0,date_fns_format__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(date, pattern, {\n        locale: date_fns_locale__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    });\n}\nfunction calculateNights(checkIn, checkOut) {\n    return (0,date_fns_differenceInDays__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkOut, checkIn);\n}\nfunction validateDateRange(checkIn, checkOut) {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    if ((0,date_fns_isBefore__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkIn, today)) {\n        return \"La fecha de entrada no puede ser anterior a hoy\";\n    }\n    if (!(0,date_fns_isAfter__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(checkOut, checkIn)) {\n        return \"La fecha de salida debe ser posterior a la fecha de entrada\";\n    }\n    const nights = calculateNights(checkIn, checkOut);\n    if (nights > 30) {\n        return \"La estad\\xeda no puede ser mayor a 30 noches\";\n    }\n    if (nights < 1) {\n        return \"La estad\\xeda debe ser de al menos 1 noche\";\n    }\n    return null;\n}\nfunction validateGuestCount(guests) {\n    if (guests < 1) {\n        return \"Debe haber al menos 1 hu\\xe9sped\";\n    }\n    if (guests > 12) {\n        return \"El m\\xe1ximo es 12 hu\\xe9spedes por reserva\";\n    }\n    return null;\n}\nfunction generateBookingReference() {\n    const timestamp = Date.now().toString(36);\n    const random = Math.random().toString(36).substr(2, 5);\n    return `SC-${timestamp}${random}`.toUpperCase();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFDSjtBQUM4QjtBQUFBO0FBQUE7QUFBQTtBQUNsQztBQUU5QixTQUFTTyxHQUFHLEdBQUdDLE1BQW9CO0lBQ3hDLE9BQU9QLHVEQUFPQSxDQUFDRCwwQ0FBSUEsQ0FBQ1E7QUFDdEI7QUFFTyxTQUFTQyxlQUFlQyxNQUFjLEVBQUVDLFdBQW1CLEtBQUs7SUFDckUsT0FBTyxJQUFJQyxLQUFLQyxZQUFZLENBQUMsU0FBUztRQUNwQ0MsT0FBTztRQUNQSCxVQUFVQTtJQUNaLEdBQUdULE1BQU0sQ0FBQ1E7QUFDWjtBQUVPLFNBQVNLLFdBQVdDLElBQVUsRUFBRUMsVUFBa0IsWUFBWTtJQUNuRSxPQUFPZiwyREFBTUEsQ0FBQ2MsTUFBTUMsU0FBUztRQUFFQyxRQUFRWix1REFBRUE7SUFBQztBQUM1QztBQUVPLFNBQVNhLGdCQUFnQkMsT0FBYSxFQUFFQyxRQUFjO0lBQzNELE9BQU9sQixxRUFBZ0JBLENBQUNrQixVQUFVRDtBQUNwQztBQUVPLFNBQVNFLGtCQUFrQkYsT0FBYSxFQUFFQyxRQUFjO0lBQzdELE1BQU1FLFFBQVEsSUFBSUM7SUFDbEJELE1BQU1FLFFBQVEsQ0FBQyxHQUFHLEdBQUcsR0FBRztJQUV4QixJQUFJcEIsNkRBQVFBLENBQUNlLFNBQVNHLFFBQVE7UUFDNUIsT0FBTztJQUNUO0lBRUEsSUFBSSxDQUFDbkIsNERBQU9BLENBQUNpQixVQUFVRCxVQUFVO1FBQy9CLE9BQU87SUFDVDtJQUVBLE1BQU1NLFNBQVNQLGdCQUFnQkMsU0FBU0M7SUFDeEMsSUFBSUssU0FBUyxJQUFJO1FBQ2YsT0FBTztJQUNUO0lBRUEsSUFBSUEsU0FBUyxHQUFHO1FBQ2QsT0FBTztJQUNUO0lBRUEsT0FBTztBQUNUO0FBRU8sU0FBU0MsbUJBQW1CQyxNQUFjO0lBQy9DLElBQUlBLFNBQVMsR0FBRztRQUNkLE9BQU87SUFDVDtJQUVBLElBQUlBLFNBQVMsSUFBSTtRQUNmLE9BQU87SUFDVDtJQUVBLE9BQU87QUFDVDtBQUVPLFNBQVNDO0lBQ2QsTUFBTUMsWUFBWU4sS0FBS08sR0FBRyxHQUFHQyxRQUFRLENBQUM7SUFDdEMsTUFBTUMsU0FBU0MsS0FBS0QsTUFBTSxHQUFHRCxRQUFRLENBQUMsSUFBSUcsTUFBTSxDQUFDLEdBQUc7SUFDcEQsT0FBTyxDQUFDLEdBQUcsRUFBRUwsVUFBVSxFQUFFRyxPQUFPLENBQUMsQ0FBQ0csV0FBVztBQUMvQyIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cmZjYW1wLWJvb2tpbmctc3lzdGVtLy4vbGliL3V0aWxzLnRzP2Y3NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDbGFzc1ZhbHVlLCBjbHN4IH0gZnJvbSAnY2xzeCc7XHJcbmltcG9ydCB7IHR3TWVyZ2UgfSBmcm9tICd0YWlsd2luZC1tZXJnZSc7XHJcbmltcG9ydCB7IGZvcm1hdCwgZGlmZmVyZW5jZUluRGF5cywgaXNBZnRlciwgaXNCZWZvcmUgfSBmcm9tICdkYXRlLWZucyc7XHJcbmltcG9ydCB7IGVzIH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbiguLi5pbnB1dHM6IENsYXNzVmFsdWVbXSkge1xyXG4gIHJldHVybiB0d01lcmdlKGNsc3goaW5wdXRzKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDdXJyZW5jeShhbW91bnQ6IG51bWJlciwgY3VycmVuY3k6IHN0cmluZyA9ICdVU0QnKTogc3RyaW5nIHtcclxuICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHtcclxuICAgIHN0eWxlOiAnY3VycmVuY3knLFxyXG4gICAgY3VycmVuY3k6IGN1cnJlbmN5LFxyXG4gIH0pLmZvcm1hdChhbW91bnQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlOiBEYXRlLCBwYXR0ZXJuOiBzdHJpbmcgPSAnZGQvTU0veXl5eScpOiBzdHJpbmcge1xyXG4gIHJldHVybiBmb3JtYXQoZGF0ZSwgcGF0dGVybiwgeyBsb2NhbGU6IGVzIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlTmlnaHRzKGNoZWNrSW46IERhdGUsIGNoZWNrT3V0OiBEYXRlKTogbnVtYmVyIHtcclxuICByZXR1cm4gZGlmZmVyZW5jZUluRGF5cyhjaGVja091dCwgY2hlY2tJbik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURhdGVSYW5nZShjaGVja0luOiBEYXRlLCBjaGVja091dDogRGF0ZSk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICBcclxuICBpZiAoaXNCZWZvcmUoY2hlY2tJbiwgdG9kYXkpKSB7XHJcbiAgICByZXR1cm4gJ0xhIGZlY2hhIGRlIGVudHJhZGEgbm8gcHVlZGUgc2VyIGFudGVyaW9yIGEgaG95JztcclxuICB9XHJcbiAgXHJcbiAgaWYgKCFpc0FmdGVyKGNoZWNrT3V0LCBjaGVja0luKSkge1xyXG4gICAgcmV0dXJuICdMYSBmZWNoYSBkZSBzYWxpZGEgZGViZSBzZXIgcG9zdGVyaW9yIGEgbGEgZmVjaGEgZGUgZW50cmFkYSc7XHJcbiAgfVxyXG4gIFxyXG4gIGNvbnN0IG5pZ2h0cyA9IGNhbGN1bGF0ZU5pZ2h0cyhjaGVja0luLCBjaGVja091dCk7XHJcbiAgaWYgKG5pZ2h0cyA+IDMwKSB7XHJcbiAgICByZXR1cm4gJ0xhIGVzdGFkw61hIG5vIHB1ZWRlIHNlciBtYXlvciBhIDMwIG5vY2hlcyc7XHJcbiAgfVxyXG4gIFxyXG4gIGlmIChuaWdodHMgPCAxKSB7XHJcbiAgICByZXR1cm4gJ0xhIGVzdGFkw61hIGRlYmUgc2VyIGRlIGFsIG1lbm9zIDEgbm9jaGUnO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlR3Vlc3RDb3VudChndWVzdHM6IG51bWJlcik6IHN0cmluZyB8IG51bGwge1xyXG4gIGlmIChndWVzdHMgPCAxKSB7XHJcbiAgICByZXR1cm4gJ0RlYmUgaGFiZXIgYWwgbWVub3MgMSBodcOpc3BlZCc7XHJcbiAgfVxyXG4gIFxyXG4gIGlmIChndWVzdHMgPiAxMikge1xyXG4gICAgcmV0dXJuICdFbCBtw6F4aW1vIGVzIDEyIGh1w6lzcGVkZXMgcG9yIHJlc2VydmEnO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQm9va2luZ1JlZmVyZW5jZSgpOiBzdHJpbmcge1xyXG4gIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCkudG9TdHJpbmcoMzYpO1xyXG4gIGNvbnN0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA1KTtcclxuICByZXR1cm4gYFNDLSR7dGltZXN0YW1wfSR7cmFuZG9tfWAudG9VcHBlckNhc2UoKTtcclxufSAiXSwibmFtZXMiOlsiY2xzeCIsInR3TWVyZ2UiLCJmb3JtYXQiLCJkaWZmZXJlbmNlSW5EYXlzIiwiaXNBZnRlciIsImlzQmVmb3JlIiwiZXMiLCJjbiIsImlucHV0cyIsImZvcm1hdEN1cnJlbmN5IiwiYW1vdW50IiwiY3VycmVuY3kiLCJJbnRsIiwiTnVtYmVyRm9ybWF0Iiwic3R5bGUiLCJmb3JtYXREYXRlIiwiZGF0ZSIsInBhdHRlcm4iLCJsb2NhbGUiLCJjYWxjdWxhdGVOaWdodHMiLCJjaGVja0luIiwiY2hlY2tPdXQiLCJ2YWxpZGF0ZURhdGVSYW5nZSIsInRvZGF5IiwiRGF0ZSIsInNldEhvdXJzIiwibmlnaHRzIiwidmFsaWRhdGVHdWVzdENvdW50IiwiZ3Vlc3RzIiwiZ2VuZXJhdGVCb29raW5nUmVmZXJlbmNlIiwidGltZXN0YW1wIiwibm93IiwidG9TdHJpbmciLCJyYW5kb20iLCJNYXRoIiwic3Vic3RyIiwidG9VcHBlckNhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/whatsapp.ts":
/*!*************************!*\
  !*** ./lib/whatsapp.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkWhatsAppStatus: () => (/* binding */ checkWhatsAppStatus),\n/* harmony export */   formatDateForWhatsApp: () => (/* binding */ formatDateForWhatsApp),\n/* harmony export */   getRoomTypeName: () => (/* binding */ getRoomTypeName),\n/* harmony export */   sendBookingConfirmation: () => (/* binding */ sendBookingConfirmation),\n/* harmony export */   sendBookingReminder: () => (/* binding */ sendBookingReminder),\n/* harmony export */   sendWelcomeMessage: () => (/* binding */ sendWelcomeMessage),\n/* harmony export */   sendWhatsAppMessage: () => (/* binding */ sendWhatsAppMessage)\n/* harmony export */ });\n// Función para enviar mensajes de WhatsApp directamente a Green API desde el backend\nconst sendWhatsAppMessage = async (phone, message)=>{\n    const idInstance = \"7105281616\";\n    const apiTokenInstance = \"e44f5320e85d4222baff6089d5f192bc6363f86e55da4e3e8c\";\n    // Formatea el número para Green API\n    let cleaned = phone.replace(/[^0-9]/g, \"\");\n    if (!cleaned.startsWith(\"54\")) {\n        cleaned = \"54\" + cleaned;\n    }\n    const chatId = cleaned + \"@c.us\";\n    const url = `https://api.green-api.com/waInstance${idInstance}/sendMessage/${apiTokenInstance}`;\n    try {\n        const res = await fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                chatId,\n                message\n            })\n        });\n        const data = await res.json();\n        if (!res.ok) {\n            console.error(\"[GreenAPI] Error HTTP:\", data);\n            return {\n                success: false,\n                error: data.error || \"Error enviando mensaje\"\n            };\n        }\n        return {\n            success: true,\n            messageId: data.idMessage\n        };\n    } catch (error) {\n        console.error(\"[GreenAPI] Error de conexi\\xf3n:\", error);\n        return {\n            success: false,\n            error: \"Error de conexi\\xf3n\"\n        };\n    }\n};\n// Función para obtener el nombre del tipo de habitación\nconst getRoomTypeName = (roomTypeId)=>{\n    const roomTypes = {\n        \"casa-playa\": \"Casa de Playa (Cuarto Compartido)\",\n        \"casitas-privadas\": \"Casitas Privadas\",\n        \"casas-deluxe\": \"Casas Deluxe\"\n    };\n    return roomTypes[roomTypeId] || roomTypeId;\n};\n// Función para formatear fechas para WhatsApp\nconst formatDateForWhatsApp = (dateString)=>{\n    const date = new Date(dateString);\n    return date.toLocaleDateString(\"es-ES\", {\n        weekday: \"long\",\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\"\n    });\n};\n// Función para enviar confirmación de reserva\nconst sendBookingConfirmation = async (phone, bookingData)=>{\n    const message = `¡Hola ${bookingData.guestName}! 🎉\n\nTu reserva ha sido confirmada exitosamente.\n\n📅 Check-in: ${formatDateForWhatsApp(bookingData.checkIn)}\n📅 Check-out: ${formatDateForWhatsApp(bookingData.checkOut)}\n🏠 Habitación: ${getRoomTypeName(bookingData.roomTypeId)}\n👥 Huéspedes: ${bookingData.guests}\n💰 Total: $${bookingData.total}\n🔢 Referencia: ${bookingData.bookingReference}\n\n¡Nos vemos pronto en SurfCamp Santa Teresa! 🌊`;\n    return sendWhatsAppMessage(phone, message);\n};\n// Función para enviar recordatorio de reserva\nconst sendBookingReminder = async (phone, bookingData)=>{\n    const message = `¡Hola ${bookingData.guestName}! 🌊\n\nTe recordamos tu reserva en SurfCamp Santa Teresa:\n\n📅 Check-in: ${formatDateForWhatsApp(bookingData.checkIn)}\n🏠 Habitación: ${getRoomTypeName(bookingData.roomTypeId)}\n🔢 Referencia: ${bookingData.bookingReference}\n\n¡Estamos ansiosos por recibirte! 🏄‍♂️`;\n    return sendWhatsAppMessage(phone, message);\n};\n// Función para enviar mensaje de bienvenida\nconst sendWelcomeMessage = async (phone, bookingData)=>{\n    const message = `¡Bienvenido/a ${bookingData.guestName}! 🎉\n\nTu reserva en SurfCamp Santa Teresa está lista:\n\n🏠 Habitación: ${getRoomTypeName(bookingData.roomTypeId)}\n🔢 Referencia: ${bookingData.bookingReference}\n\n¡Disfruta de tu estadía! 🌊`;\n    return sendWhatsAppMessage(phone, message);\n};\n// Función para verificar estado de Green API\nconst checkWhatsAppStatus = async ()=>{\n    try {\n        const response = await fetch(\"/api/whatsapp\", {\n            method: \"GET\"\n        });\n        const result = await response.json();\n        if (!response.ok) {\n            return {\n                configured: false,\n                error: result.error\n            };\n        }\n        return {\n            configured: true,\n            state: result.state,\n            instance: result.instance\n        };\n    } catch (error) {\n        return {\n            configured: false,\n            error: \"Error de conexi\\xf3n\"\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZUFJMUMsRUFBRWQsZ0JBQWdCYSxZQUFZWixVQUFVLEVBQUU7ZUFDMUMsRUFBRVksWUFBWU0sZ0JBQWdCLENBQUM7OzJCQUVuQixDQUFDO0lBRTFCLE9BQU81QyxvQkFBb0JDLE9BQU9DO0FBQ3BDLEVBQUU7QUFFRiw2Q0FBNkM7QUFDdEMsTUFBTTZDLHNCQUFzQjtJQU1qQyxJQUFJO1FBQ0YsTUFBTUMsV0FBVyxNQUFNckMsTUFBTSxpQkFBaUI7WUFDNUNDLFFBQVE7UUFDVjtRQUVBLE1BQU1xQyxTQUFTLE1BQU1ELFNBQVM5QixJQUFJO1FBRWxDLElBQUksQ0FBQzhCLFNBQVM3QixFQUFFLEVBQUU7WUFDaEIsT0FBTztnQkFBRStCLFlBQVk7Z0JBQU83QixPQUFPNEIsT0FBTzVCLEtBQUs7WUFBQztRQUNsRDtRQUVBLE9BQU87WUFDTDZCLFlBQVk7WUFDWkMsT0FBT0YsT0FBT0UsS0FBSztZQUNuQkMsVUFBVUgsT0FBT0csUUFBUTtRQUMzQjtJQUNGLEVBQUUsT0FBTy9CLE9BQU87UUFDZCxPQUFPO1lBQUU2QixZQUFZO1lBQU83QixPQUFPO1FBQW9CO0lBQ3pEO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cmZjYW1wLWJvb2tpbmctc3lzdGVtLy4vbGliL3doYXRzYXBwLnRzPzhmM2IiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRnVuY2nDs24gcGFyYSBlbnZpYXIgbWVuc2FqZXMgZGUgV2hhdHNBcHAgZGlyZWN0YW1lbnRlIGEgR3JlZW4gQVBJIGRlc2RlIGVsIGJhY2tlbmRcbmV4cG9ydCBjb25zdCBzZW5kV2hhdHNBcHBNZXNzYWdlID0gYXN5bmMgKFxuICBwaG9uZTogc3RyaW5nLFxuICBtZXNzYWdlOiBzdHJpbmdcbik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlSWQ/OiBzdHJpbmc7IGVycm9yPzogc3RyaW5nIH0+ID0+IHtcbiAgY29uc3QgaWRJbnN0YW5jZSA9ICc3MTA1MjgxNjE2JztcbiAgY29uc3QgYXBpVG9rZW5JbnN0YW5jZSA9ICdlNDRmNTMyMGU4NWQ0MjIyYmFmZjYwODlkNWYxOTJiYzYzNjNmODZlNTVkYTRlM2U4Yyc7XG5cbiAgLy8gRm9ybWF0ZWEgZWwgbsO6bWVybyBwYXJhIEdyZWVuIEFQSVxuICBsZXQgY2xlYW5lZCA9IHBob25lLnJlcGxhY2UoL1teMC05XS9nLCAnJyk7XG4gIGlmICghY2xlYW5lZC5zdGFydHNXaXRoKCc1NCcpKSB7XG4gICAgY2xlYW5lZCA9ICc1NCcgKyBjbGVhbmVkO1xuICB9XG4gIGNvbnN0IGNoYXRJZCA9IGNsZWFuZWQgKyAnQGMudXMnO1xuXG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5ncmVlbi1hcGkuY29tL3dhSW5zdGFuY2Uke2lkSW5zdGFuY2V9L3NlbmRNZXNzYWdlLyR7YXBpVG9rZW5JbnN0YW5jZX1gO1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgY2hhdElkLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgfSksXG4gICAgfSk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tHcmVlbkFQSV0gRXJyb3IgSFRUUDonLCBkYXRhKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZGF0YS5lcnJvciB8fCAnRXJyb3IgZW52aWFuZG8gbWVuc2FqZScgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZUlkOiBkYXRhLmlkTWVzc2FnZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tHcmVlbkFQSV0gRXJyb3IgZGUgY29uZXhpw7NuOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFcnJvciBkZSBjb25leGnDs24nIH07XG4gIH1cbn07XG5cbi8vIEZ1bmNpw7NuIHBhcmEgb2J0ZW5lciBlbCBub21icmUgZGVsIHRpcG8gZGUgaGFiaXRhY2nDs25cbmV4cG9ydCBjb25zdCBnZXRSb29tVHlwZU5hbWUgPSAocm9vbVR5cGVJZDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3Qgcm9vbVR5cGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICdjYXNhLXBsYXlhJzogJ0Nhc2EgZGUgUGxheWEgKEN1YXJ0byBDb21wYXJ0aWRvKScsXG4gICAgJ2Nhc2l0YXMtcHJpdmFkYXMnOiAnQ2FzaXRhcyBQcml2YWRhcycsXG4gICAgJ2Nhc2FzLWRlbHV4ZSc6ICdDYXNhcyBEZWx1eGUnXG4gIH07XG5cbiAgcmV0dXJuIHJvb21UeXBlc1tyb29tVHlwZUlkXSB8fCByb29tVHlwZUlkO1xufTtcblxuLy8gRnVuY2nDs24gcGFyYSBmb3JtYXRlYXIgZmVjaGFzIHBhcmEgV2hhdHNBcHBcbmV4cG9ydCBjb25zdCBmb3JtYXREYXRlRm9yV2hhdHNBcHAgPSAoZGF0ZVN0cmluZzogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywge1xuICAgIHdlZWtkYXk6ICdsb25nJyxcbiAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgbW9udGg6ICdsb25nJyxcbiAgICBkYXk6ICdudW1lcmljJ1xuICB9KTtcbn07XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZW52aWFyIGNvbmZpcm1hY2nDs24gZGUgcmVzZXJ2YVxuZXhwb3J0IGNvbnN0IHNlbmRCb29raW5nQ29uZmlybWF0aW9uID0gYXN5bmMgKFxuICBwaG9uZTogc3RyaW5nLFxuICBib29raW5nRGF0YToge1xuICAgIGNoZWNrSW46IHN0cmluZztcbiAgICBjaGVja091dDogc3RyaW5nO1xuICAgIHJvb21UeXBlSWQ6IHN0cmluZztcbiAgICBndWVzdHM6IG51bWJlcjtcbiAgICBib29raW5nUmVmZXJlbmNlOiBzdHJpbmc7XG4gICAgdG90YWw6IG51bWJlcjtcbiAgICBndWVzdE5hbWU6IHN0cmluZztcbiAgfVxuKSA9PiB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBgwqFIb2xhICR7Ym9va2luZ0RhdGEuZ3Vlc3ROYW1lfSEg8J+OiVxuXG5UdSByZXNlcnZhIGhhIHNpZG8gY29uZmlybWFkYSBleGl0b3NhbWVudGUuXG5cbvCfk4UgQ2hlY2staW46ICR7Zm9ybWF0RGF0ZUZvcldoYXRzQXBwKGJvb2tpbmdEYXRhLmNoZWNrSW4pfVxu8J+ThSBDaGVjay1vdXQ6ICR7Zm9ybWF0RGF0ZUZvcldoYXRzQXBwKGJvb2tpbmdEYXRhLmNoZWNrT3V0KX1cbvCfj6AgSGFiaXRhY2nDs246ICR7Z2V0Um9vbVR5cGVOYW1lKGJvb2tpbmdEYXRhLnJvb21UeXBlSWQpfVxu8J+RpSBIdcOpc3BlZGVzOiAke2Jvb2tpbmdEYXRhLmd1ZXN0c31cbvCfkrAgVG90YWw6ICQke2Jvb2tpbmdEYXRhLnRvdGFsfVxu8J+UoiBSZWZlcmVuY2lhOiAke2Jvb2tpbmdEYXRhLmJvb2tpbmdSZWZlcmVuY2V9XG5cbsKhTm9zIHZlbW9zIHByb250byBlbiBTdXJmQ2FtcCBTYW50YSBUZXJlc2EhIPCfjIpgO1xuXG4gIHJldHVybiBzZW5kV2hhdHNBcHBNZXNzYWdlKHBob25lLCBtZXNzYWdlKTtcbn07XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZW52aWFyIHJlY29yZGF0b3JpbyBkZSByZXNlcnZhXG5leHBvcnQgY29uc3Qgc2VuZEJvb2tpbmdSZW1pbmRlciA9IGFzeW5jIChcbiAgcGhvbmU6IHN0cmluZyxcbiAgYm9va2luZ0RhdGE6IHtcbiAgICBjaGVja0luOiBzdHJpbmc7XG4gICAgcm9vbVR5cGVJZDogc3RyaW5nO1xuICAgIGJvb2tpbmdSZWZlcmVuY2U6IHN0cmluZztcbiAgICBndWVzdE5hbWU6IHN0cmluZztcbiAgfVxuKSA9PiB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBgwqFIb2xhICR7Ym9va2luZ0RhdGEuZ3Vlc3ROYW1lfSEg8J+MilxuXG5UZSByZWNvcmRhbW9zIHR1IHJlc2VydmEgZW4gU3VyZkNhbXAgU2FudGEgVGVyZXNhOlxuXG7wn5OFIENoZWNrLWluOiAke2Zvcm1hdERhdGVGb3JXaGF0c0FwcChib29raW5nRGF0YS5jaGVja0luKX1cbvCfj6AgSGFiaXRhY2nDs246ICR7Z2V0Um9vbVR5cGVOYW1lKGJvb2tpbmdEYXRhLnJvb21UeXBlSWQpfVxu8J+UoiBSZWZlcmVuY2lhOiAke2Jvb2tpbmdEYXRhLmJvb2tpbmdSZWZlcmVuY2V9XG5cbsKhRXN0YW1vcyBhbnNpb3NvcyBwb3IgcmVjaWJpcnRlISDwn4+E4oCN4pmC77iPYDtcblxuICByZXR1cm4gc2VuZFdoYXRzQXBwTWVzc2FnZShwaG9uZSwgbWVzc2FnZSk7XG59O1xuXG4vLyBGdW5jacOzbiBwYXJhIGVudmlhciBtZW5zYWplIGRlIGJpZW52ZW5pZGFcbmV4cG9ydCBjb25zdCBzZW5kV2VsY29tZU1lc3NhZ2UgPSBhc3luYyAoXG4gIHBob25lOiBzdHJpbmcsXG4gIGJvb2tpbmdEYXRhOiB7XG4gICAgcm9vbVR5cGVJZDogc3RyaW5nO1xuICAgIGJvb2tpbmdSZWZlcmVuY2U6IHN0cmluZztcbiAgICBndWVzdE5hbWU6IHN0cmluZztcbiAgfVxuKSA9PiB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBgwqFCaWVudmVuaWRvL2EgJHtib29raW5nRGF0YS5ndWVzdE5hbWV9ISDwn46JXG5cblR1IHJlc2VydmEgZW4gU3VyZkNhbXAgU2FudGEgVGVyZXNhIGVzdMOhIGxpc3RhOlxuXG7wn4+gIEhhYml0YWNpw7NuOiAke2dldFJvb21UeXBlTmFtZShib29raW5nRGF0YS5yb29tVHlwZUlkKX1cbvCflKIgUmVmZXJlbmNpYTogJHtib29raW5nRGF0YS5ib29raW5nUmVmZXJlbmNlfVxuXG7CoURpc2ZydXRhIGRlIHR1IGVzdGFkw61hISDwn4yKYDtcblxuICByZXR1cm4gc2VuZFdoYXRzQXBwTWVzc2FnZShwaG9uZSwgbWVzc2FnZSk7XG59O1xuXG4vLyBGdW5jacOzbiBwYXJhIHZlcmlmaWNhciBlc3RhZG8gZGUgR3JlZW4gQVBJXG5leHBvcnQgY29uc3QgY2hlY2tXaGF0c0FwcFN0YXR1cyA9IGFzeW5jICgpOiBQcm9taXNlPHtcbiAgY29uZmlndXJlZDogYm9vbGVhbjtcbiAgc3RhdGU/OiBzdHJpbmc7XG4gIGluc3RhbmNlPzogc3RyaW5nO1xuICBlcnJvcj86IHN0cmluZztcbn0+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3doYXRzYXBwJywge1xuICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHsgY29uZmlndXJlZDogZmFsc2UsIGVycm9yOiByZXN1bHQuZXJyb3IgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgY29uZmlndXJlZDogdHJ1ZSxcbiAgICAgIHN0YXRlOiByZXN1bHQuc3RhdGUsXG4gICAgICBpbnN0YW5jZTogcmVzdWx0Lmluc3RhbmNlXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBjb25maWd1cmVkOiBmYWxzZSwgZXJyb3I6ICdFcnJvciBkZSBjb25leGnDs24nIH07XG4gIH1cbn07ICJdLCJuYW1lcyI6WyJzZW5kV2hhdHNBcHBNZXNzYWdlIiwicGhvbmUiLCJtZXNzYWdlIiwiaWRJbnN0YW5jZSIsImFwaVRva2VuSW5zdGFuY2UiLCJjbGVhbmVkIiwicmVwbGFjZSIsInN0YXJ0c1dpdGgiLCJjaGF0SWQiLCJ1cmwiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJqc29uIiwib2siLCJjb25zb2xlIiwiZXJyb3IiLCJzdWNjZXNzIiwibWVzc2FnZUlkIiwiaWRNZXNzYWdlIiwiZ2V0Um9vbVR5cGVOYW1lIiwicm9vbVR5cGVJZCIsInJvb21UeXBlcyIsImZvcm1hdERhdGVGb3JXaGF0c0FwcCIsImRhdGVTdHJpbmciLCJkYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIndlZWtkYXkiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJzZW5kQm9va2luZ0NvbmZpcm1hdGlvbiIsImJvb2tpbmdEYXRhIiwiZ3Vlc3ROYW1lIiwiY2hlY2tJbiIsImNoZWNrT3V0IiwiZ3Vlc3RzIiwidG90YWwiLCJib29raW5nUmVmZXJlbmNlIiwic2VuZEJvb2tpbmdSZW1pbmRlciIsInNlbmRXZWxjb21lTWVzc2FnZSIsImNoZWNrV2hhdHNBcHBTdGF0dXMiLCJyZXNwb25zZSIsInJlc3VsdCIsImNvbmZpZ3VyZWQiLCJzdGF0ZSIsImluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/whatsapp.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/date-fns","vendor-chunks/tailwind-merge","vendor-chunks/clsx","vendor-chunks/@babel","vendor-chunks/axios","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/call-bind-apply-helpers","vendor-chunks/debug","vendor-chunks/get-proto","vendor-chunks/mime-db","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/supports-color","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/has-flag","vendor-chunks/get-intrinsic","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freserve%2Froute&page=%2Fapi%2Freserve%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freserve%2Froute.ts&appDir=C%3A%5CUsers%5Cloko_%5COneDrive%5CDesktop%5CEscritorio%5Csurfcamp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cloko_%5COneDrive%5CDesktop%5CEscritorio%5Csurfcamp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();